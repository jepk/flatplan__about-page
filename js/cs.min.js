!function(t,e){for(var n in e)t[n]=e[n]}(this,function(t){function e(n){if(o[n])return o[n].exports;var i=o[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n=window.ComagicJsonp;window.ComagicJsonp=function(o,r){for(var s,a,c=0,l=[];c<o.length;c++)a=o[c],i[a]&&l.push.apply(l,i[a]),i[a]=0;for(s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s]);for(n&&n(o,r);l.length;)l.shift().call(null,e)};var o={},i={0:0};return e.e=function(t,n){if(0===i[t])return n.call(null,e);if(void 0!==i[t])i[t].push(n);else{i[t]=[n];var o=document.getElementsByTagName("head")[0],r=document.createElement("script");r.type="text/javascript",r.charset="utf-8",r.async=!0,r.src=e.p+"comagic.widgets.min.js",o.appendChild(r)}},e.m=t,e.c=o,e.p="",e(0)}([function(t,e,n){"use strict";if(Object.defineProperty(e,"__esModule",{value:!0}),window.__isComagicScriptLoaded)throw new Error('ВНИМАНИЕ! Обнаружен дубликат кода вставки "__cs" на данной странице и поэтому его нормальная работа невозможна. Пожалуйста, проверьте шаблоны сайта в Вашей CMS и устраните дублирование.');window.__isComagicScriptLoaded=!0;var o=n(1),i=n(6),r=n(9),s=n(13),a=n(12),c=n(18),l=n(25),u=n(32),d=n(33),p=n(2),f=p.essential.apply,h=s.SiteSettings.info,g=n(27),m=n(35),_=n(36),v=n(37);e.Comagic=u.API,e.ComagicWidget={},e.Comagic.Captcha={},e.ComagicWidget.openSitePhonePanel=e.Comagic.openVASitePhonePanel,e.ComagicWidget.sitePhoneCall=function(t,e){u.API.push(["startCall",[t,e]])},e.Comagic.UI={},e.Comagic.UI.registerViewController=_.registerViewController,i.EventBus.on("ss:waitforloadcorescripts",function(t,r,a){var c=function(t){return r.widgets.hasOwnProperty(t)&&null!==r.widgets[t]},u=["personal_form","call_generator","offline_message_generator"];if(r.widgets.hasOwnProperty("lead")){delete r.widgets.lead;for(var _=0;_<u.length;_++)r.widgets[u[_]]={}}g.init(m.DEFAULT_WIDGET_VIEWS_OPTIONS,"prod"),l.Core.init(r,a),n.p=new p.essential.URL(a).replace({path:"/widget/js/"});var v=r.comagic_web_url,y=""+v+r.api.path+r.api.key+"/";d.ComagicWebApi.init(y),n.e(1,function(){var t=n(38).Ws,l=n(103).ConsultantController,u=n(108).LeadController,d=n(109).SitephoneController,p=n(110).ConsultantApi,g=n(104).Hub;f(e.Comagic,p),f(e.Comagic.UI,n(111)),f(e.Comagic.UI,n(114)),e.Comagic.Captcha.get_captcha=e.Comagic.getCaptcha,o.Queue.registerAndProcess(["uiApiLoaded"],{__commands:["uiApiLoaded"],uiApiLoaded:function(t){return t&&t()}},!0),c("sitephone")&&d.init({site_key:h().key,server_url:r.widgets.sitephone.server_url,comagic_web_url:h().web_host,is_analytics_enabled:r.widgets.sitephone.is_analytics_enabled,is_staff_group_enabled:!!r.widgets.sitephone.group_title,is_captcha_enabled:r.widgets.sitephone.is_captcha_enabled},a),o.Queue.push("waitForTrackViewAndRun",function(){(c("consultant")||c("personal_form"))&&t.onSession(s.SiteSettings.info().host||r.server_url);var e=c("consultant");e?(l.init(a),u.init(a)):r.widgets.hasOwnProperty("personal_form")&&u.init(a),g.send("consultant","init",{get_history:!l.isChatHistoryExist(),get_vcard:e}),i.EventBus.on("ws:timetoreinit",function(){g.send("consultant","reinit")})})})}),s.SiteSettings.init(),i.EventBus.on("aly:trackview",c.CallTracking.onAlyTrackview),i.EventBus.on("aly:trackview",r.Events.onAlyTrackview),i.EventBus.on("aly:trackview",v.VisitorIdEmbedder.run),o.Queue.push("waitForSiteSettingsAndRun",function(){a.Analytics.init()})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,i=n(2),r=n(3);!function(t){function e(t,e,n,o){var i=t[e];if("function"==typeof i)return i.apply(n||t,o)}function n(t,e,n){v.push([].slice.call(arguments))}function o(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var t=[].concat(arguments);t.unshift("[Queue]"),r.util.log.apply(r.util,t)}function s(t,e){return i.essential.isArray(t)?_.push(t):this.push([t,i.essential.toArray(e)])}function a(t){if(i.essential.isUndefined(t))return _.shift();if(i.essential.isNumber(t))return _.splice(t,1)[0];if(i.essential.isString(t))for(var e,n=0;e=_[n];n++)if(i.essential.isArray(e)&&e[0]===t)return this.shift(n)}function c(t){if(i.essential.isUndefined(t))return _[0];if(i.essential.isNumber(t))return _[t];if(i.essential.isString(t))for(var e,n=0;e=_[n];n++)if(i.essential.isArray(e)&&e[0]===t)return e;return null}function l(t,e){for(var n;n=_.shift();)this._process(n,t,e)}function u(t,e,r,s){o("going to process commands",t,"of",e),i.essential.isBoolean(r)&&(s=r,r=void 0),s&&n(t,e,r),this._processCommands(t,e,r)}function d(t){for(var e,n=t.__commands,o=0;e=n[o];o++){if(y.hasOwnProperty(e))throw{message:'uLiB.util.Queue detected command conflict: "'+e+'"',command:e,existingObj:y[e],newObj:t};y[e]=t}}function p(t,e,n,o){this.register(e),this.processCommands(t,e,n,o)}function f(t,n,s){if(!t)return null;t=i.essential.copyArray(t);var a,c;return a=t.shift(),c=1===t.length&&i.essential.isArray(t[0])?t[0]:t,o(r.util.sformat("processing {0}({1})",a,c)),e(n,a,s||n,c)}function h(t,e,n){if(this.length)for(var i,r,s=0;i=t[s];s++)e.__commands&&e.__commands.indexOf(i)!==-1&&(r=this.shift(i),this._process(r,e,n)===!1&&(o("smth. wrong with",i,r,"pushing back"),this.push(r)))}var g=window,m=["Comagic","__cs"],_=[],v=[],y={};t.maybeCall=e,t.addCommandToWatchFor=n,t.log=o;for(var b,w=0;b=m[w];w++)g[b]&&i.essential.isArray(g[b])&&(_=_.concat(g[b]),"__cs"===b&&(g[b]=t));t.length=_.length,t.push=s,t.shift=a,t.peek=c,t.process=l,t.processCommands=u,t.register=d,t.registerAndProcess=p,t._process=f,t._processCommands=h,window.setInterval(function(){for(var e,n=0;e=v[n];n++)h.apply(t,e)},100)}(o=e.Queue||(e.Queue={}))},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n;!function(t){function e(t,n,o){if(o&&e(t,o),t&&n&&"object"==typeof n)for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i]);return t}function n(t,o){var i=e({},t);if(o)for(var r in o)i.hasOwnProperty(r)&&a(i[r])&&a(o[r])?i[r]=n(i[r],o[r]):i[r]=o[r];return i}function o(t,e){for(var n,o=e||window,i=t.split("."),r=0;n=i[r];r++)o=o[n]=o[n]||{};return o}function i(t,e){var n;if(e=e||"","string"==typeof t)n=t;else{var o=[];for(var i in t)t.hasOwnProperty(i)&&o.push(i+"="+encodeURIComponent(t[i]));n=o.join("&")}return e&&n.length&&n.indexOf(e)===-1&&(n=e+n),n}function r(t,e){var n={};for(var o in t)e(t[o])||(n[o]=t[o]);return n}function s(t){return"[object Array]"===Object.prototype.toString.call(t)}function a(t){return null!==t&&"object"==typeof t}function c(t){return t===!!t}function l(t){return"number"==typeof t}function u(t){return"string"==typeof t}function d(t){return""===t}function p(t){return"function"==typeof t}function f(t){return void 0===t}function h(t){return t instanceof HTMLElement}function g(t){return/^(?:\w+:)?\/\/([^\s\.]+\.\S{2}|localhost[\:?\d]*)\S*$/.test(t)}function m(t){return f(t)||null===t||""===t||s(t)&&0===t.length||a(t)&&_(t)}function _(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function v(t){return"[object Arguments]"===Object.prototype.toString.call(t)}function y(t){return s(t)?t:v(t)?Array.prototype.slice.call(t):[t]}function b(t){for(var e=new Array(t.length),n=t.length;n--;)e[n]=t[n];return e}function w(t){function e(){var t=o.exec(n.url);n.protocol=t[2]||"https",n.host=t[5]||"",n.port=t[6]||"",n.path=t[7]||"/",n.query=t[8]||"",n.hash=t[10]||""}var n=this,o=new RegExp("^(([^:/\\?#]+):)?(//(([^:/\\?#]*)(?::([^/\\?#]*))?))?([^\\?#]*)(\\?([^#]*))?(#(.*))?$");this.url=t,this.replace=function(t){t=t||{};var e=t.protocol||n.protocol,o=t.host||n.host,r=t.port||n.port,s=t.path||n.path,a=i(t.query||n.query,"?"),c=t.hash||n.hash;return(e?e+":":e)+"//"+o+(r?":"+r:r)+s+a+(c?"#"+c:c)},this.toString=function(){return this.replace()},e()}function S(t){var e=(new Date,(new Date).getTime()),n=(new Date).setHours(0,0,0,0),o=[];t=t.map(function(t){return 1e3*t});for(var i=0,r=t;i<r.length;i++){var s=r[i];if(!(s<e)){for(var a=!1;s>=n;)a=!0,n+=864e5;a&&o.push({date:n-864e5,times:[]}),o[o.length-1].times.push(s)}}return o}t.apply=e,t.mergeObjects=n,t.ns=o,t.ensureQueryString=i,t.filterObjectByFn=r,t.isArray=s,t.isObject=a,t.isBoolean=c,t.isNumber=l,t.isString=u,t.isEmptyString=d,t.isFunction=p,t.isUndefined=f,t.isHTMLElement=h,t.isUrl=g,t.isEmpty=m,t.isObjectEmpty=_,t.isArguments=v,t.toArray=y,t.copyArray=b,t.URL=w,t.groupTimes=S}(n=e.essential||(e.essential={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,i=n(2),r=n(4),s=n(6),a=n(8);!function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var e=[].slice.call(arguments),o=Tt[e[0]]||"";e.unshift(o),e.unshift("%c"+t.getTimeStr()),t.__debug&&Pt.console&&console.log.apply&&console.log.apply(console,e)}function n(){var e=[].slice.call(arguments);e.unshift("[Comagic]"),t.__debug&&console.error.apply(console,e)}function o(t){var e=this.__debugparams;return!t||"encodejson"==t&&this.isObject(e)?"encodejson"==t?JSON.stringify(e):e:this.isObject(e)&&e[t]||""}function c(t){return t.replace(/(?:^|[-_])(\w)/g,function(t,e){return e?e.toUpperCase():""})}function l(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var i,r=arguments[0],s=arguments[1];if(this.isObject(s)){var a,c,l={};for(i=/{([^}]+)}/g;a=i.exec(r);)a=a[1],c=s[a],void 0!==c&&(("cls"==a||this.endsWith(a,"Cls"))&&(c=this.getCssSelector(c,!0)),l[a]=c);for(var u in l)l.hasOwnProperty(u)&&(i=new RegExp("\\{"+u+"\\}","gm"),r=r.replace(i,l[u]))}else for(var d=0;d<arguments.length-1;d++)i=new RegExp("\\{"+d+"\\}","gm"),r=r.replace(i,arguments[d+1]);return r}function u(t,e){return t.indexOf(e,t.length-e.length)!=-1}function d(t,e){if(i.essential.isArray(e)){for(var n,o=0;n=e[o];o++)if(this.startsWith(t,n))return!0;return!1}return 0==t.indexOf(e)}function p(t,e){return this.endsWith(t,e)?t:t+e}function f(t){return t.replace(/(<([^>]+)>)/gi,"")}function h(t){return(""+t).replace(this.C.RE_HREF,function(){var t=arguments;return l('{0}<a href="{1}{2}">{2}</a>',t[1],t[3]||"",encodeURI(t[5]))}).replace('href="www.','href="http://www.').replace('href="://','href="http://')}function g(t){return t.replace(/\n\r/g,"<br/>").replace(/\r\n/g,"<br/>").replace(/\n/g,"<br/>").replace(/\r/g,"<br/>")}function m(t){return t.replace("/<br/>/g","\n")}function _(t){return t=""+t,t.replace(/\s/g,"")}function v(t,e){for(var n=t||"",o=n.split(" "),i=[""],r=0;r<o.length;r++){var s=i[i.length-1];!s.length||s.length+o[r].length<e-1?i[i.length-1]=[s,o[r]].join(" ").trim():i.push(o[r])}return i}function y(t){return t.len?t.len:t.prefix?t.prefix.length-1:3}function b(t){var e=t.mask||"###-##-##",n=t.format||"+{country} ({city}) {phone}",o=this.getCityLength(t),i=t.raw&&t.raw.substr(o+1),r=e&&(e.match(/#/g)||[]).length,s=i&&i.length,a=t.text,c=0;if(!i&&a)return a;if(r>s)for(var l=0;l<r-s;l++)e=e.replace("#","");else if(r<s)for(var l=0;l<s-r;l++)e="#"+e;return i=e.replace(/#/g,function(){return i[c++]||""}),this.sformat(n,{country:t.raw.substr(0,1),city:t.raw.substr(1,o),phone:i})}function w(t){return/\S/.test(t)}function S(t){var e=t.getDate(),n=t.getMonth()+1,o=t.getFullYear();return""+o+"-"+(n<=9?"0"+n:n)+"-"+(e<=9?"0"+e:e)}function k(t){t=t||new Date;var e=t.getHours(),n=t.getMinutes();return e<10&&(e="0"+e),n<10&&(n="0"+n),e+":"+n}function O(t,e){var n;return"number"==typeof t?n=new Date(1e3*t):(e=e||0,t=t.split(/(?:\s|T)/),t[0]=t[0].split("."),t[1]=t[1].split(":"),n=new Date(t[0][2],t[0][1],t[0][0],t[1][0],t[1][1],t[1][2])),n.setTime(t.getTime()-1e3*e),n}function E(){return+new Date}function C(){return this.timeDelta}function I(t){this.timeDelta=t}function P(t,e,n){for(var o=n||0,i=t.length;o<i;o++)if(t[o]===e)return o;return-1}function T(t,e){if(i.essential.isArray(e)){for(var n,o=0;n=e[o];o++)if(this.arrayIsContain(t,n))return!0;return!1}return this.arrayIndexOf(t,e)!==-1}function A(t,e,n){for(var o=0;o<t.length;o++)e.call(n,t[o],o,t)}function j(t,e,n){for(var o,i=[],r=0;o=t[r];r++)e.call(n||Pt,o)!==!1&&i.push(o);return i}function x(t,e){return this.arrayIndexOf(e,t)}function N(t,e,n){return function(){var o=[].slice.call(arguments);return t.apply(e,o.concat(n))}}function U(t,e,n){return function(){var o=t.apply(n,arguments);return o?(s.EventBus&&s.EventBus.fireEvent.apply(s.EventBus,["ulib:event"].concat(o)),e.apply(n,o)):null}}function R(t,e,n,o){return i.essential.isFunction(t)&&(e=t),i.essential.isObject(e)&&(n=e),i.essential.isString(e)&&i.essential.isObject(t)&&(e=t[e]),void 0===n&&i.essential.isObject(t)&&(n=t),i.essential.isArray(e)&&(o=e),i.essential.isArray(n)&&(o=n),i.essential.isFunction(e)?e.apply(n||this,o||[]):null}function M(t,e){this.isString(e)&&(e=this.getObjByName(e));var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.superclass=e.prototype}function D(t,e,n,o){var i=Array.prototype.slice.apply(arguments);if(t=i.shift(),e=i.shift(),n=i.shift()||[],this.isString(e)&&(e=this.getObjByName(e)),this.isString(n)&&(o=n,n=[]),!o)throw"Name of the mixin within the target must be specified";if(!e)throw"Cannot mix-in from undefined source";if(!t)throw"Cannot mix-in to undefined target";if(!t.prototype.hasOwnProperty("mixins")){var r=t.prototype.mixins;if(t.prototype.mixins={},r)for(var s in r)t.prototype.mixins[s]=r[s]}if(e=this.isFunction(e)?e.prototype:e,o&&(t.prototype.mixins[o]=e),n.length)for(var a=0,c=void 0;c=n[a];a++)t.prototype[c]=this.isFunction(e)?e.prototype[c]:e[c];else for(var c in e)t.prototype[c]=e[c]}function L(t,e){this.isArray(e)||(e=[e]);for(var n,o=0;n=e[o];o++){if(this.isString(n)&&(n=this.getObjByName(n)),t instanceof n)return!0;var i=t.mixins;if(i)for(var r,s=0;r=i[s];s++)if(t instanceof r)return!0}return!1}function F(t,e){for(var n in e)e.hasOwnProperty(n)&&void 0===t[n]&&(t[n]=e[n]);return t}function W(t,e){if(!t)return!1;for(var n,o=e||Pt,i=t.split("."),r=0;n=i[r];r++)if(!(o=o[n]))return!1;return!0}function H(t){for(var e,n=Pt,o=t.split("."),i=[],r=0;e=o[r];r++){if(!n[e])return this.error("Property",e,"of",i.join("."),"is not an Object"),null;n=n[e],i.push(e)}return n}function B(t){return decodeURI((new RegExp(t+"=(.+?)(&|$)").exec(Pt.location.search)||[,""])[1])}function V(t){return decodeURI((new RegExp(t+"=(.+?)(&|$)").exec(Pt.location.hash)||[,""])[1])}function q(t){if(!t||"object"!=typeof t)return t;var e,n,o="function"==typeof t.pop?[]:{};for(e in t)t.hasOwnProperty(e)&&(n=t[e],n&&"object"==typeof n?o[e]=this.clone(n):o[e]=n);return o}function G(t,e){return this.isString(e)&&(e=this.getObjByName(e)),t instanceof e}function z(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}function Q(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(t[n])}function Y(t,e){var n=document.createElement("script");return n.src=new i.essential.URL(t).toString(),n.async=!0,n.onload=e,document.head.appendChild(n),n}function J(t,e){var n=t[e];return delete t[e],n}function Z(t){var e=this.sessionStorage().getItem(t);null===e&&(e=this.localStorage().getItem(t));var n=JSON.parse(e);return n&&n.ezstorage?n.value:n}function X(t,e,n){return(n?this.localStorage():this.sessionStorage()).setItem(t,JSON.stringify(e))}function K(t){var e="testtesttest";t.setItem(e,"1"),t.removeItem(e)}function $(){try{return this._checkStorage(window.localStorage),window.localStorage}catch(t){return this.log("window.localStorage not available. emulate"),this.apply(this._localStorage,this._storageApi)}}function tt(){try{return this._checkStorage(window.sessionStorage),window.sessionStorage}catch(t){return this.log("window.sessionStorage not available. emulate"),this.apply(this._sessionStorage,this._storageApi)}}function et(){var t=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}function nt(t){return(t<10?"0":"")+t}function ot(t){return void 0===t&&(t=new Date),this.padNumber(t.getHours())+":"+this.padNumber(t.getMinutes())+":"+this.padNumber(t.getSeconds())+"."+t.getMilliseconds()}function it(){return Math.round((new Date).getTime()/1e3)}function rt(t){return 1e3*Math.pow(2,t)+Math.round(1e3*Math.random())}function st(t,e){return Math.floor(Math.random()*(e-t+1))+t}function at(t){for(var e=t.substring(1).split("&"),n={},o=0;o<e.length;o++){var i=e[o].split("=");if(i[0])try{n[i[0]]=decodeURIComponent(i[1])}catch(t){}}return n}function ct(){return at(window.location.search)}function lt(){return at(window.location.hash)}function ut(t){if(0===t.indexOf("/")){var e=/(\w+)\[(\d+)\]/,n=t.split("/");n.splice(0,1);for(var o=0;o<n.length;o++)e.test(n[o])&&(n[o]=n[o].replace(e,function(t,e,n){return e+":eq("+(parseInt(n,10)-1)+")"}));return n.join(" > ")}return t}function dt(){var t=tt();if(t)return t.getItem("cmg:debugExternalChatComagicWebUrl")}function pt(){return t.C.IS_PHONE?"mobile":t.C.IS_TABLET?"tablet":"desktop"}function ft(t){return t===Object(t)}function ht(t){var e=document.createElement("comagic");return e.innerHTML=t.trim(),e.childNodes[0]}function gt(t){var e=document.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("type","text/css"),e.setAttribute("href",t),e}function mt(e){var n=r.CookieShop;try{void 0===e?t.__debug=void 0!==ct()._comagic_set_debug?ct()._comagic_set_debug:void 0!==lt()._comagic_set_debug?lt()._comagic_set_debug:P([1,!0,"true","1"],n.get(n.DEBUG))!==-1:(t.__debug=P([1,!0,"true","1"],e)!==-1,n.set(n.DEBUG,e,-1))}catch(t){console.log(t)}}function _t(t){return t=encodeURIComponent(t||document.location.href),0===decodeURIComponent(t).indexOf("file:///")}function vt(t){if(null===t)return"null";var e=typeof t;if("undefined"===e||"string"===e||"number"===e||"boolean"===e)return e;var n=Object.prototype.toString,o=n.call(t);if(void 0!==t.length&&"function"!=typeof t)return"array";switch(o){case"[object Array]":return"array";case"[object Date]":return"date";case"[object Boolean]":return"boolean";case"[object Number]":return"number";case"[object RegExp]":return"regexp"}return"function"===e?"function":"object"===e?"object":void 0}function yt(t,e){t=t||{};for(var n in e)"object"==typeof e[n]?t[n]=yt(t[n],e[n]):t[n]=e[n];return t}function bt(t){return"number"==typeof t&&isFinite(t)}function wt(t){return"string"==typeof t}function St(t,e){var n=a.KEY.CODES;switch(t){case n.ZERO:case n.ONE:case n.TWO:case n.THREE:case n.FOUR:case n.FIVE:case n.SIX:case n.SEVEN:case n.EIGHT:case n.NINE:case n.NUM_ZERO:case n.NUM_ONE:case n.NUM_TWO:case n.NUM_THREE:case n.NUM_FOUR:case n.NUM_FIVE:case n.NUM_SIX:case n.NUM_SEVEN:case n.NUM_EIGHT:case n.NUM_NINE:if(void 0!==e&&void 0!==e.keyIdentifier)switch(e.keyIdentifier){case"U+0030":case"U+0031":case"U+0032":case"U+0033":case"U+0034":case"U+0035":case"U+0036":case"U+0037":case"U+0038":case"U+0039":return!0;default:return!1}return!0;default:return!1}}function kt(t,e){t=t.browserEvent||t;var n=t["page"+e];return n||0===n||(n=t["client"+e]||0),n}function Ot(t){return[kt(t,"X"),kt(t,"Y")]}function Et(t){return/[^\u0000-\u00ff]/.test(t)}function Ct(){this.__debugparams=this.getURLParameter("bannerdebug"),this.__debugger=2==this.getURLParameter("bannerdebug");try{this.__debugparams=JSON.parse(this.__debugparams)}catch(t){this.log("Cannot parse debug params. Going to plain debug mode.")}var t=this.getURLParameter("time_delta");""!==t&&this.dSetTimeDelta(t)}var It,Pt=window,Tt=(Pt.__cs,{"[Ws]":"background: #88FF88","[Queue]":"background: #FF8866","[Aly]":"background: #FFFF66","[CallTracking]":"background: #8181F7","[PhoneReplacer]":"background: #81BEF7","[DynamicalTracking]":"background: #81FFF7","[Lead]":"background: #BDBDBD"});!function(t){t.IS_IE_LT_11=!!Function("/*@cc_on return true@*/")(),t.IS_IE_LT_10=!window.navigator.msPointerEnabled&&!!Function("/*@cc_on return true@*/")(),t.IS_IE_LT_9=!Pt.document.addEventListener,t.IS_IE_LT_8=!Pt.document.querySelector,t.IS_TOUCH_DEVICE=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(navigator.userAgent||navigator.vendor||window.opera)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test((navigator.userAgent||navigator.vendor||window.opera).substr(0,4)),t.IS_PHONE=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(navigator.userAgent||navigator.vendor)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test((navigator.userAgent||navigator.vendor).substr(0,4)),t.IS_TABLET=t.IS_TOUCH_DEVICE&&!t.IS_PHONE,t.IS_IOS=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].indexOf(Pt.navigator.platform)!==-1,t.IS_ANDROID=navigator.userAgent.toLowerCase().indexOf("android")!==-1,t.IS_FIREFOX=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,t.RE_EMAIL=/^(\w+)([\-+.][\w]+)*@(\w[\-\w]*\.){1,5}([A-Za-z]){2,6}$/,t.RE_PHONE=/^\d{11}$/,t.RE_HREF=/(^|\s)(((?:http|https|ftp|):\/\/(?:[^:]+:[^@]+@)?)|(.{0}(?=www\.)))([^\s]+)+/gim,t.ZZZZZZ="ZZZZZZ",t.VALID_FILE_EXTENSIONS=["png","xpm","jpg","doc","docx","txt","xls","xlsx","csv","odt","ods","pdf","djvu","xml","fb2","epub"]}(It=t.C||(t.C={})),t.log=e,t.error=n,t.getDebugParam=o,t.camelize=c,t.sformat=l,t.endsWith=u,t.startsWith=d,t.ensureEndsWith=p,t.stripTags=f,t.textLinksToHtml=h,t.crLfToBr=g,t.brToCrLf=m,t.strim=_,t.getChunks=v,t.getCityLength=y,t.formatPhone=b,t.isNotContainsOnlyWhitespaces=w,t.dformat=S,t.tformat=k,t.dApplyTimeDelta=O,t.dnow=E,t.dGetTimeDelta=C,t.dSetTimeDelta=I,t.arrayIndexOf=P,t.arrayIsContain=T,t.arrayForEach=A,t.arrayFilter=j,t.inArray=x,t.bind=N,t.wrapEvent=U,t.maybeCall=R,t.extend=M,t.mixIn=D,t.isinstance=L,t.applyIf=F,t.isNs=W,t.getObjByName=H,t.getURLParameter=B,t.getHashParameter=V,t.clone=q,t.isInstance=G,t.okeys=z,t.ovalues=Q,t.loadScript=Y,t.opop=J,t.storageGet=Z,t.storageSet=X;var At;!function(t){t.items={}}(At=t._localStorage||(t._localStorage={}));var jt;!function(t){t.items={}}(jt=t._sessionStorage||(t._sessionStorage={}));var xt;!function(t){function e(t){var e=this.items[t];return void 0===e?null:e}function n(t,e){this.items[t]=""+e}function o(t){delete this.items[t]}t.getItem=e,t.setItem=n,t.removeItem=o}(xt=t._storageApi||(t._storageApi={})),t._checkStorage=K,t.localStorage=$,t.sessionStorage=tt,t.uuid=et,t.padNumber=nt,t.getTimeStr=ot,t.getTimestamp=it,t.getExponentialBackoff=rt,t.getRandomInt=st,t.getUrlParams=at,t.getUrlQuery=ct,t.getUrlHash=lt,t.prepareSelector=ut,t.getDebugExternalChatComagicWebUrl=dt,t.getDeviceType=pt,t.isObject=ft,t.createElFromHtml=ht,t.createLinkTag=gt,t.setDebug=mt,t.isUriLocal=_t,t.typeOf=vt,t.apply=yt,t.isNumber=bt,t.isString=wt;var Nt=navigator.userAgent.toLocaleLowerCase();t.isOpera=/opera/i.test(Nt),t.isWebKit=/webkit/i.test(Nt),t.isGecko=!t.isWebKit&&/gecko/i.test(Nt),t.isChrome=/chrome/i.test(Nt),t.isIE=!t.isOpera&&/msie/i.test(Nt)||/trident.*rv\:11\./i.test(Nt)||/edge/i.test(Nt),t.isSafari=/safari/i.test(Nt)&&!/chrome/i.test(Nt),t.isiPhone=/iphone/i.test(Nt),t.isAndroid=/android/i.test(Nt),t.isiPad=/ipad/.test(Nt),t.isKeyNum=St,t.getXY=Ot,t.isTouch=void 0!==document.ontouchstart,t.containsNonLatinCodepoints=Et,t.init=Ct,t.init()}(o=e.util||(e.util={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,i=n(5);!function(t){function e(t){v=t()}function n(){this._expires||(this._expires={},this._expires[this.DEBUG]=-1,this._expires[this.DT]=18e5,this._expires[this.WS_OFFLINE]=18e5,this._expires[this.ALY_OFFLINE]=18e5,this._expires[this.SESSION]=18e5,this._expires[this.COMAGIC_ID]=63072e6)}function o(t){return this._expires[t]}function r(){this._setupExpires()}function s(t){return t+v}function a(t,e,n){return i.cookie.set(this.getName(t),e,n||this._getExpires(t))}function c(t){return i.cookie.get(this.getName(t))}function l(t){return i.cookie.getAll(this.getName(t))}function u(t){return this.remove(t)}function d(t){return i.cookie.remove(this.getName(t))}function p(){var t=this.getComagicId();return t?t.split(this._ciSeparator)[0]:null}function f(){var t=this.get(this.VISITOR);return t=t?t.split(this._separator):[],{key:t[0],id:t[1]}}function h(){var t=this.getComagicId();return t?t.split(this._ciSeparator)[1]:null}function g(){var t=this.get(this.SESSION);return t=t?t.split(this._separator):[],{key:t[0]}}function m(t){this.set(this.COMAGIC_ID,t)}function _(){var t,e=this.getAll(this.COMAGIC_ID);if(!e.length)return null;t=e.shift();for(var n,o=0;n=e[o];o++)+n.split(this._ciSeparator)[2]>+t.split(this._ciSeparator)[2]&&(t=n);return t}var v;t.BANNER_STATE="_comagic_banner_state",t.DEBUG="_comagic_debug",t.DT="_cmg_dt",t.WS_OFFLINE="_comagic_offline",t.ALY_OFFLINE="_comagic_aly_offline",t.PHONE_REPLACEMENT="_comagic_phr",t.COMAGIC_ID="_comagic_id",t.SESSION="_comagic_session",t.VISITOR="_comagic_visitor",t._separator="||",t._ciSeparator=".",t._expires=null,t.setUniquePostfix=e,t._setupExpires=n,t._getExpires=o,t.setup=r,t.getName=s,t.set=a,t.get=c,t.getAll=l,t.del=u,t.remove=d,t.getVisitorId=p,t.getVisitorObsolete=f,t.getSessionId=h,t.getSessionObsolete=g,t.setComagicId=m,t.getComagicId=_}(o=e.CookieShop||(e.CookieShop={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,i=n(2);!function(t){function e(t,e,n){i.essential.isUndefined(e)&&this.remove(t),n=n||63072e6;var o=new Date,r=[];o.setTime(o.getTime()+n),r.push(t+"="+encodeURIComponent(e)),r.push("path=/"),this.getDomain()&&r.push("domain="+this.getDomain()),n!=-1&&r.push("expires="+o.toUTCString()),document.cookie=r.join(";")}function n(t){var e=o.getAll(t);return e.length?e[0]:null}function r(t){for(var e,n=[],o=t.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1"),i=new RegExp("(?:^|; )"+o+"=([^;]*)","g");e=i.exec(document.cookie);)n.push(decodeURIComponent(e[1]));return n}function s(t){var e=new Date(0).toUTCString();document.cookie=t+"=; expires="+e+"; domain="+o.getDomain()+"; path=/;"}function a(){return u}function c(t){u=t;var e="cmgtest";this.set(e,e),e!=this.get(e)&&(u=null),this.remove(e)}function l(){return navigator.cookieEnabled||"cookie"in document&&(document.cookie.length>0||(document.cookie="test").indexOf.call(document.cookie,"test")>-1)}var u=0==document.domain.indexOf("www.")?document.domain.substring(4):document.domain;t.set=e,t.get=n,t.getAll=r,t.remove=s,t.getDomain=a,t.setDomain=c,t.isEnabled=l}(o=e.cookie||(e.cookie={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(7);e.EventBus=new o.Observable},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),i=function(){function t(){this.initObservable()}return t.prototype.initObservable=function(){this.events={}},t.prototype.on=function(t,e,n){if(o.essential.isObject(t)){n=t.scope;for(var i in t)t.hasOwnProperty(i)&&this.on(i,t[i],n)}var r=this.events[t]||[];r.push({fn:e,scope:n}),this.events[t]=r},t.prototype.un=function(t,e){for(var n,o=this.events[t]||[],i=[],r=0;n=o[r];r++)n.fn!==e&&i.push(n);this.events[t]=i},t.prototype.fireEvent=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var i,r=Array.prototype.slice.apply(arguments),s=!0;t=r.shift(),i=this.events[t]||[];for(var a=0,c=void 0;c=i[a];a++)s=!1!==c.fn.apply(c.scope||this,r)&&s;return s},t.prototype.hasListeners=function(t){return!(!this.events[t]||!this.events[t].length)},t}();e.Observable=i},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n;!function(t){var e;!function(t){t[t.BACKSPACE=8]="BACKSPACE",t[t.TAB=9]="TAB",t[t.ENTER=13]="ENTER",t[t.RETURN=13]="RETURN",t[t.SHIFT=16]="SHIFT",t[t.CTRL=17]="CTRL",t[t.ALT=18]="ALT",t[t.ESC=27]="ESC",t[t.END=35]="END",t[t.HOME=36]="HOME",t[t.LEFT=37]="LEFT",t[t.UP=38]="UP",t[t.RIGHT=39]="RIGHT",t[t.DOWN=40]="DOWN",t[t.INSERT=45]="INSERT",t[t.DELETE=46]="DELETE",t[t.ZERO=48]="ZERO",t[t.ONE=49]="ONE",t[t.TWO=50]="TWO",t[t.THREE=51]="THREE",t[t.FOUR=52]="FOUR",t[t.FIVE=53]="FIVE",t[t.SIX=54]="SIX",t[t.SEVEN=55]="SEVEN",t[t.EIGHT=56]="EIGHT",t[t.NINE=57]="NINE",t[t.NUM_ZERO=96]="NUM_ZERO",t[t.NUM_ONE=97]="NUM_ONE",t[t.NUM_TWO=98]="NUM_TWO",t[t.NUM_THREE=99]="NUM_THREE",t[t.NUM_FOUR=100]="NUM_FOUR",t[t.NUM_FIVE=101]="NUM_FIVE",t[t.NUM_SIX=102]="NUM_SIX",t[t.NUM_SEVEN=103]="NUM_SEVEN",t[t.NUM_EIGHT=104]="NUM_EIGHT",t[t.NUM_NINE=105]="NUM_NINE",t[t.NUM_PLUS=107]="NUM_PLUS",t[t.NUM_MINUS=109]="NUM_MINUS",t[t.A=65]="A",t[t.B=66]="B",t[t.C=67]="C",t[t.D=68]="D",t[t.E=69]="E",t[t.F=70]="F",t[t.G=71]="G",t[t.H=72]="H",t[t.I=73]="I",t[t.J=74]="J",t[t.K=75]="K",t[t.L=76]="L",t[t.M=77]="M",t[t.N=78]="N",t[t.O=79]="O",t[t.P=80]="P",t[t.Q=81]="Q",t[t.R=82]="R",t[t.S=83]="S",t[t.T=84]="T",t[t.U=85]="U",t[t.V=86]="V",t[t.W=87]="W",t[t.X=88]="X",t[t.Y=89]="Y",
t[t.Z=90]="Z",t[t.DOT=190]="DOT"}(e=t.CODES||(t.CODES={})),t.MAP={48:"0",49:1,50:2,51:3,52:4,53:5,54:6,55:7,56:8,57:9,96:0,97:1,98:2,99:3,100:4,101:5,102:6,103:7,104:8,105:9,107:"+",109:"-",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",190:"."}}(n=e.KEY||(e.KEY={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,i=n(3),r=n(10),s=n(11),a=n(12);!function(t){function e(t){i.util.log("Sending event notification, event:",t),y(t)}function n(t){if(t){var e=r.dimension.getWindowScrollTop(),n=r.dimension.getWindowHeight()+e,o=r.dimension.offset(t).top,i=o+t.clientHeight;return i<=n&&o>=e}return!1}function o(t){for(var n in w)if(w.hasOwnProperty(n))for(var o,i=document.querySelectorAll(n),r=0;o=i[r];r++)if(t.target===o){e(w[n]);break}}function c(t){for(var n in S)if(S.hasOwnProperty(n))if(n==k){if(t.target.href&&t.target.href.indexOf(O)==-1){e(S[n]);break}}else if(t.target.href&&t.target.href.match(new RegExp(n))){e(S[n]);break}}function l(t){s.un(window,"scroll",_),e(b.scrollStart)}function u(t){r.dimension.getWindowScrollTop()+r.dimension.getWindowHeight()===r.dimension.getDocumentHeight()&&(s.un(window,"scroll",v),e(b.scrollEnd))}function d(t){for(var o in b.scrollTo)b.scrollTo.hasOwnProperty(o)&&n(o)&&(e(b.scrollTo[o]),delete b.scrollTo[o])}function p(t,e){var n=e,o=n.es,i=o&&o.ce,r=o&&o.le,s=o&&o.se,a=o&&o.tm;i&&f(i),r&&h(r),s&&g(s),a&&m(a)}function f(t){for(var e,n=0;e=t[n];n++)w[i.util.prepareSelector(t[n][1])]=t[n][0];s.on(document,"click",i.util.bind(o,this))}function h(t){for(var e,n=0;e=t[n];n++)S[e[1]]=e[0];s.on("a","click",i.util.bind(c,this))}function g(t){_=i.util.bind(l,this),v=i.util.bind(u,this);for(var e,n=0;e=t[n];n++)"comagic_scroll_start"==t[n][1]?(b.scrollStart=t[n][0],s.on(window,"scroll",_)):"comagic_scroll_end"==t[n][1]?(b.scrollEnd=t[n][0],s.on(window,"scroll",v)):b.scrollTo[i.util.prepareSelector(t[n][1])]=t[n][0];if(b.scrollTo){var o=i.util.bind(d,this);s.on(window,"scroll",o)}}function m(t){for(var n=function(t){setTimeout(function(){e(t[0])},1e3*t[1])},o=0,i=t;o<i.length;o++){var r=i[o];n(r)}}var _,v,y=a.Analytics.notifiOnEvent,b={scrollStart:null,scrollEnd:null,scrollTo:{}},w={},S={},k="_external_link_",O=0==document.location.host.indexOf("www.")?document.location.host.slice(4):document.location.host;t.onAlyTrackview=p}(o=e.Events||(e.Events={}))},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n;!function(t){function e(){return"undefined"!=typeof pageYOffset?pageYOffset:r.scrollTop}function n(){return window.innerHeight||a.clientHeight||r.clientHeight}function o(){return Math.max(r.scrollHeight,a.scrollHeight,r.offsetHeight,a.offsetHeight,r.clientHeight,a.clientHeight)}function i(t){for(var e={left:t.offsetLeft||0,top:t.offsetTop||0};t=t.offsetParent;)e.left+=t.offsetLeft,e.top+=t.offsetTop;return e}var r=document.body,s=document,a=s.documentElement;t.getWindowScrollTop=e,t.getWindowHeight=n,t.getDocumentHeight=o,t.offset=i}(n=e.dimension||(e.dimension={}))},function(t,e,n){"use strict";function o(t){var e=!1,n=!0,o=function(n){"readystatechange"==n.type&&"complete"!=d.readyState||(("load"==n.type?u:d)[g](m+n.type,o,!1),!e&&(e=!0)&&t.call(u,n.type||n))},i=function(){try{p.doScroll("left")}catch(t){return void setTimeout(i,50)}o("poll")};if("complete"===d.readyState||"loaded"===d.readyState||"interactive"===d.readyState)t.call(u,"lazy");else{if(!f&&p.doScroll){try{n=!u.frameElement}catch(t){}n&&i()}d[h](m+"DOMContentLoaded",o,!1),d[h](m+"readystatechange",o,!1),u[h](m+"load",o,!1)}}function i(t,e,n,o){if(l.essential.isString(e))for(var r,s=d.querySelectorAll(e),a=0;r=s[a];a++)i(t,r,n,o);else e[t?h:g](m+n,o,!0)}function r(t,e,n){i(!0,t,e,n)}function s(t,e,n){for(var o,i=0;o=e[i];i++)this.on(t,o,n)}function a(t,e,n){i(!1,t,e,n)}function c(t){o(t)}Object.defineProperty(e,"__esModule",{value:!0});var l=n(2),u=window,d=u.document,p=d.documentElement,f=d.addEventListener,h=f?"addEventListener":"attachEvent",g=f?"removeEventListener":"detachEvent",m=f?"":"on";e.contentLoaded=o,e.on=r,e.ons=s,e.un=a,e.ready=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,i=n(2),r=n(3),s=n(5),a=n(4),c=n(6),l=n(1),u=n(13),d=n(16),p=n(14),f=n(17);!function(t){function e(){if(X.isUriLocal())return void X.log("[Aly]","Local URI disallowed");var t=u.SiteSettings.params("analytics"),e=u.SiteSettings.info();if(!t)return void X.log("[Aly]","No params specified");G=e.key,W=t.server_url,H=t.session_ttl;var n=this;l.Queue.push("waitForTrackViewAndRun",function(t){f.Ym.run(t,X.bind(D,n))}),d.UA.detect(X.bind(M,this)),_()}function n(){q=+new Date,h(),g(),$.setTimeout(function(){o()},H),l.Queue.registerAndProcess(t.__commands,t,!0)}function o(){K.fireEvent("aly:stopsession",this),m()}function h(){B=!0}function g(){if(B){$.clearTimeout(V);var t=6e4;V=setTimeout(function(){C()},t)}}function m(){$.clearTimeout(V),B=!1}function _(){var t=U("/t/v/",{ur:document.location.href,ti:document.title.slice(0,1e3),re:document.referrer,la:navigator.language,sc:screen.width+"x"+screen.height,uc:d.UA.clientId||"",dv:r.util.getDeviceType()},F);return et=J,t}function v(t,e,n,o){return U("/t/e/",{ca:t,ac:e,la:n,va:o})}function y(t){return U("/t/se/",{ce:t})}function b(t,e){return U("/p/s/",{pn:t,pv:e})}function w(t,e){return U("/p/g/",{pn:t},e)}function S(t,e){return U("/p/h/",{pn:t},e)}function k(t){return U("/p/d/",{pn:t})}function O(t){return U("/ua/sc/",{uc:d.UA.clientId||t})}function E(t){return U("/ym/sc/",{yc:t})}function C(){return U("/e/p/")}function I(t){return U("/e/e/",{ei:t})}function P(t){return U("/dct/pn/",{},t)}function T(t,e){var n=this,o=function(){t.call(n,i.essential.apply({session:tt},e))};return Q(tt)?(X.log("[Aly]","No analytics session. Wait a bit"),!1):void o()}function A(){var t=tt.ci||a.CookieShop.getComagicId();return"undefined"===t&&(t=void 0),t}function j(){return tt.hi}function x(){return tt.ce}function N(t){if(t&&t.length)for(var e=0,n=void 0,o=void 0,i=void 0,r=t.length;e<r;e++)n=t[e],o=n.name,i=n.params,nt[o].call(this,i)}function U(t,e,n){var o=this;void 0===e&&(e={}),X.log("[Aly]",X.sformat("request({0})",t,e,n));var r=R(t,e);for(var s in r)if(r.hasOwnProperty(s)){var a=r[s];i.essential.isEmpty(a)&&delete r[s]}return g(),p.ajax({url:W+t,crossDomain:!0,method:"GET",data:r,withCredentials:!0,contentType:"application/json",complete:function(i){var r=JSON.parse(i.response);return r&&r.success?(L.apply(o,r.result),void(n&&n.apply(o,r.result))):(X.log("[Aly]","Got unsuccessful response on "+t+": ",r),void K.fireEvent("aly:requesterror",o,t,e))}})}function R(t,e){var n={sk:G,t:z,ci:A(),hi:tt.hi,_vi:a.CookieShop.getVisitorObsolete().id,_si:a.CookieShop.getSessionObsolete().key};return"/t/v/"===t&&delete n.hi,n.t||delete n.t,n.ci&&(delete n._vi,delete n._si),i.essential.apply(n,e)}function M(t){var e=function(){O(t)};et===J?l.Queue.push("waitForTrackViewAndRun",e):et===Z&&e()}function D(t){E(t)}function L(t,e,n){return X.log("[Aly]","onRequestComplete(",t,e,n,")"),z=e,N(n),!0}function F(e){tt=i.essential.apply({},e),tt.cd&&s.cookie.setDomain(tt.cd),tt.ce===!1?a.CookieShop.set(a.CookieShop.ALY_OFFLINE,"2"):a.CookieShop.del(a.CookieShop.ALY_OFFLINE),tt.ci&&a.CookieShop.setComagicId(tt.ci),K.fireEvent("aly:trackview",t,tt),et=Z,n()}var W,H,B,V,q,G,z,Q=i.essential.isEmpty,Y=0,J=1,Z=2,X=r.util,K=c.EventBus,$=window,tt={},et=Y;t.__commands=["waitForTrackViewAndRun","trackEvent","trackSysEvent","setProperty","getProperty","hasProperty","deleteProperty","extendDtPhoneReservationTime"],t.init=e,t.goOnSession=n,t.stopSession=o,t.enablePing=h,t.processPing=g,t.disablePing=m,t.trackView=_,t.trackEvent=v,t.trackSysEvent=y,t.setProperty=b,t.getProperty=w,t.hasProperty=S,t.deleteProperty=k,t.setUaClientId=O,t.setYmClientId=E,t.ping=C,t.notifiOnEvent=I,t.extendDtPhoneReservationTime=P,t.waitForTrackViewAndRun=T,t.getComagicId=A,t.getHitId=j,t.isComagicEnabled=x,t.performCommands=N,t.request=U,t.composeParams=R,t.onUaDetected=M,t.onYmInit=D,t.onRequestComplete=L,t.onTrackView=F;var nt;!function(e){function n(e){K.fireEvent("aly:hide_dt_phones",t,e)}function o(e){K.fireEvent("aly:enable_phone_replacement",t,e)}function i(e){K.fireEvent("aly:disable_phone_replacement",t,e)}e.hide_dt_phones=n,e.enable_phone_replacement=o,e.disable_phone_replacement=i}(nt||(nt={}))}(o=e.Analytics||(e.Analytics={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,i=n(2),r=n(3),s=n(14),a=n(4),c=n(6),l=n(15),u=n(1);!function(t){function e(){return!!t._siteKey}function n(){for(var e;e=t._readyCallbacks.shift();)e()}function o(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var o=Array.prototype.slice.call(arguments,1);return t.replace(/{(\d+)}/g,function(t,e){return"undefined"!=typeof o[e]?o[e]:t})}function d(t,e){var n=r.util.sessionStorage();if(!n)return null;var o=JSON.parse(n.getItem(t));return 1==arguments.length?o:o&&o[e]}function p(){var t=d("comagic-widget:settings","web_host");if(t)return t;for(var e,n,o,i,s=document.getElementsByTagName("script"),a=0;i=s[a];a++)if(e=i.getAttribute("src"),n=N.exec(e),n&&r.util.arrayIndexOf(x,n[0])!==-1)return o=U.exec(e),o&&o[1];return null}function f(){return l.Storage.getItem("_cmg_sitesettings")}function h(t){if(!t||200!==t.status)return void console.log("SiteSettings request failed",t);if(t.responseJSON||(t.responseJSON=JSON.parse(t.responseText)),!t.responseJSON||!t.responseJSON.success)return void console.log("SiteSettings request is not successful",t);var e=t.responseJSON.data;l.Storage.setUniquePostfix(T),e.ttl&&l.Storage.setItem("_cmg_sitesettings",e,e.ttl),g(e)}function g(e){t._siteSettings=e,e.widgets&&Object.getOwnPropertyNames(e.widgets).length&&c.EventBus.fireEvent("ss:waitforloadcorescripts",t,t._siteSettings,C())}function m(t,e){s.ajax({url:t,crossDomain:!0,method:"GET",data:{sk:b(),pl:r.util.getDeviceType().toLowerCase()},complete:e})}function _(){var e=o(R,t._siteSettingsHost||C(),M),n=f();n?g(n):m(e,h.bind(t))}function v(o){e()||(t._siteKey=o,n())}function y(t){v(t)}function b(){return t._siteKey}function w(e){t._webHost=new i.essential.URL(e).replace({path:"",query:"",hash:""})}function S(e){t._siteSettingsHost=new i.essential.URL(e).replace({path:"",query:"",hash:""})}function k(t){return!!this._siteSettings&&void t.call(this)}function O(n){e()?n():t._readyCallbacks.push(n)}function E(){return t._host}function C(){var e,n=r.util.sessionStorage();return n&&(e=n.getItem("cmg:comagicWebUrl")),e||(e=t._webHost||(t._webHost=p())),new i.essential.URL(e).toString()}function I(){return{key:b(),host:E(),web_host:C()}}function P(){return A("consultant")}function T(){return b().substring(0,5)}function A(e){return t._siteSettings[e]||t._siteSettings.widgets&&t._siteSettings.widgets[e]}function j(){if(t._siteSettings.server_url){for(var e,n=E()||t._siteSettings.server_url,o=new i.essential.URL(n),r=[],s=o.path.split("/"),a=0,c=s.length;e=s[a],a<c;a++)"comagic"!==e&&r.push(e);return 1===r.length&&r.push(""),o.replace({path:r.join("/")})}}window.__cs_onReplacePhones=window.__cs_onReplacePhones||function(t){return!0};var x=["cs.min.js","comagic.min.js","comagic.debug.js","main.debug.js"],N=/[^\/]+\.js/,U=/\/\/([^\/]+)/,R="{0}{1}",M="/ss/settings/";t._webHost=null,t._siteSettingsHost=null,t._siteKey=null,t._host=null,t._readyCallbacks=[],t.init=_,t.__commands=["setAccount","setCsAccount","setWebUrl","waitForSiteSettingsAndRun","setSiteSettingsHost"],t.setAccount=v,t.setCsAccount=y,t.getSiteKey=b,t.setWebUrl=w,t.setSiteSettingsHost=S,t.waitForSiteSettingsAndRun=k,t.ready=O,t.getHost=E,t.getWebHost=C,t.info=I,t.getConsultantParams=P,t.uniquePostfix=T,t.params=A,t.getServerBaseUrl=j,O(function(){a.CookieShop.setup(),a.CookieShop.setUniquePostfix(T),l.Storage.setUniquePostfix(T),r.util.setDebug()}),u.Queue.registerAndProcess(t.__commands,t,!0)}(o=e.SiteSettings||(e.SiteSettings={}))},function(t,e,n){"use strict";function o(){for(var t=null,e=0;e<s.length;e++){try{t=s[e]()}catch(t){continue}break}return t}function i(t,e){r.essential.isObject(t)&&(e=t,t=e.url),t=new r.essential.URL(t).toString(),e=e||{};var n=o(),i=e.data,s=e.complete;if(n){var a=e.method||(i?"POST":"GET");"GET"===a&&i&&(t=new r.essential.URL(t).replace({query:i}),i=void 0),n.open(a,t,!0),e&&e.withCredentials&&(n.withCredentials=!0),"POST"===a&&i&&(e.headers||n.setRequestHeader("Content-type",e.contentType||"application/x-www-form-urlencoded; charset=UTF-8")),n.onreadystatechange=function(){4==n.readyState&&(200!=n.status&&304!=n.status||s&&e.complete(n))},4!=n.readyState&&n.send(i)}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),s=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}];e.ajax=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,i=n(3);!function(t){function e(t){a=t()}function n(t){return t+a}function o(t){var e=JSON.parse(i.util.localStorage().getItem(n(t)));return e&&"__value__"in e?e.__expires__&&e.__expires__<i.util.dnow()?(s(t),null):e.__value__:e}function r(t,e,o){e=void 0===e?null:e,i.util.localStorage().setItem(n(t),JSON.stringify({__value__:e,__expires__:o&&o+i.util.dnow()}))}function s(t){i.util.localStorage().removeItem(n(t))}var a;t.setUniquePostfix=e,t.makeKey=n,t.getItem=o,t.setItem=r,t.removeItem=s}(o=e.Storage||(e.Storage={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,i=n(3);!function(t){function e(t){r.log("[UA]",".detect(",t,")"),t&&(this.callback=t);try{window[window.GoogleAnalyticsObject](r.bind(this.onReady,this))}catch(t){this.haveToTryAgain()?(r.log("[UA]","Unable to detect UA Client ID. Next try in",a,"ms"),window.setTimeout(r.bind(this.detect,this),a)):r.log("[UA]","Unable to detect UA Client ID. Drop it (")}}function n(t){try{r.log("[UA]",".onReady()"),this.clientId=t?t.get("clientId"):window[window.GoogleAnalyticsObject].getAll()[0].get("clientId"),r.log("[UA]","clientId detected. Going to run the callback..."),this.callback&&this.callback(this.clientId),r.log("[UA]","callback has run")}catch(t){r.log("[UA]","Can't detect UA Client ID or callback failed",t)}}function o(){return r.getTimestamp()-s<c}var r=i.util,s=r.getTimestamp();t.clientId="";var a=100,c=25;t.detect=e,t.onReady=n,t.haveToTryAgain=o}(o=e.UA||(e.UA={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,i=n(2),r=n(3),s=n(1);!function(t){function e(e){if(e&&!t.counter)return c||(c=r.util.getTimestamp()),t.counter=window[t.prefix+e],!t.counter&&r.util.getTimestamp()-c<l?void window.setTimeout(function(){t.init(e)},u):void(t.counter&&(this.clientId=t.counter.getClientID(),this.callback&&this.callback(this.clientId),s.Queue.registerAndProcess(t.__commands,t,!0)))}function n(e,n,o,r){if(!t.counter)return!1;i.essential.isArray(n)||(n=[n]);var s=t.counter[e].apply(t.counter,n);o&&o.call(r||t,s)}function o(t){s.Queue.push("callYmApi",["params",t])}function a(e,n){var o=e.session.ym;if(o){n&&(this.callback=n);var i={visitorID:{}};i.visitorID[Comagic.getVisitorId()]={sessionID:Comagic.getSessionId()},t.init(e.session.ym),t.sendYmCustomParams(i)}}t.__commands=["callYmApi"],t.prefix="yaCounter";var c,l=25,u=100;t.init=e,t.callYmApi=n,t.sendYmCustomParams=o,t.run=a}(o=e.Ym||(e.Ym={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,i,r=n(3),s=n(11),a=n(15),c=n(4),l=n(1),u=n(6),d=n(19),p=n(20),f=n(22),h=n(13),g=r.util,m=u.EventBus,_=c.CookieShop,v=!1,y=p.DynamicalTracking,b=f.PhoneReplacer;!function(t){function e(){return o.getItem("_cmg_phr")!==!1}function n(t){o.setItem("_cmg_phr",!!t)}function i(t){o.setItem("_cmg_phones",t)}function r(){o.removeItem("_cmg_phones")}function a(t){if("2"==_.get(_.ALY_OFFLINE))return g.log("[CallTracking]","Offline. Stop working");if(o.getItem("_cmg_phones")&&this.getEnabled()){var e=o.getItem("_cmg_phones");g.log("[CallTracking]","About to replace phones from local storage",e),b.embed(e,void 0,t),y.loadCookie(),y.showPhones(t)}}function c(t){g.log("[CallTracking]",".setDynamicalReplacement]",t),v!=t&&(v=!!t,v?d.startObserve():d.stopObserve())}function l(t,e){g.log("[CallTracking]",".onAlyTrackview",t,e),s.ready(function(){if("pr"in e&&n(e.pr),b.embedDefault(),"pt"in e){var t=b.formatPhones(e.pt);i(t),e.pr&&b.embed(t)}else r();"dp"in e?(y.setup(e.dp,e.dt,e.da),y.saveCookie(),e.pr&&y.showPhones()):y.delCookie()})}function u(t){e()&&y.hidePhones()}function p(t,e){this.setEnabled(!0),this.replacePhonesFromStorage()}function f(t,e){this.setEnabled(!1),b.embedDefault()}function h(t,e){y.hidePhones(e.numb)}function m(t){for(var e=[],n=["SCRIPT","HEAD"],o=0,i=t;o<i.length;o++){var r=i[o];[].forEach.call(r.addedNodes,function(t){n.indexOf(t.nodeName)===-1&&(t.parentElement?"HEAD"!==t.parentElement.nodeName&&e.push(t[0]?t[0]:t):e.push(t[0]?t[0]:t))})}e.length&&this.replacePhonesFromStorage(e.length<100?e:void 0)}t.__commands=["setDynamicalReplacement"],t.getEnabled=e,t.setEnabled=n,t.storePhones=i,t.removePhones=r,t.replacePhonesFromStorage=a,t.setDynamicalReplacement=c,t.onAlyTrackview=l,t.onAlyStopSession=u,t.onAlyEnablePhoneReplacement=p,t.onAlyDisablePhoneReplacement=f,t.onAlyHideDtPhone=h,t.onMutationObserverChange=m}(i=e.CallTracking||(e.CallTracking={})),h.SiteSettings.ready(function(){o=a.Storage,s.contentLoaded(function(){v&&d.startObserve(),l.Queue.registerAndProcess(i.__commands,i,!0)})}),m.on({"aly:stopsession":i.onAlyStopSession,"aly:enable_phone_replacement":i.onAlyEnablePhoneReplacement,"aly:disable_phone_replacement":i.onAlyDisablePhoneReplacement,"aly:hide_dt_phones":i.onAlyHideDtPhone,"mutationobserver:change":i.onMutationObserverChange,scope:i})},function(t,e,n){"use strict";function o(){c=new MutationObserver(a),c.observe(document.documentElement,s)}function i(){c&&c.disconnect()}Object.defineProperty(e,"__esModule",{value:!0});var r=n(6),s={childList:!0,subtree:!0},a=function(t){c.disconnect(),r.EventBus.fireEvent("mutationobserver:change",t),c.observe(document.documentElement,s)},c=null;e.startObserve=o,e.stopObserve=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,i=n(2),r=n(3),s=n(1),a=n(4),c=n(21),l=n(22),u=n(15);!function(t){function e(t,e,n){r.util.log("[DynamicalTracking]",".setup(",t,e,n,")"),this.cleanupProlongationMonitoring(),this.phones=b(t)||null,this.ttl=e||null,this.reserveTime=r.util.getTimestamp(),this.dtActivityInterval=n,this.expire=(new Date).getTime()+O._expires[I],E.startWatch()}function n(){var t=r.util.localStorage();t.setItem(I,this.stringify())}function o(){var t=r.util.localStorage(),e=this.parse(t.getItem(I));(new Date).getTime()<=e.expire?i.essential.apply(this,this.parse(t.getItem(I))):this.delCookie()}function d(){var t=r.util.localStorage();t.removeItem(I)}function p(){var t=this;r.util.log("[DynamicalTracking]",".prolongNumber"),k.push("extendDtPhoneReservationTime",function(e){t.onProlongNumber(e)})}function f(t){r.util.log("[DynamicalTracking]",".onProlongNumber(",t,")"),this.ttl=t,this.reserveTime=r.util.getTimestamp(),t||(this.phones=[]),this.saveCookie(),t&&this.enableProlongationMonitoring()}function h(t){var e=this;r.util.log("[DynamicalTracking]",".waitActivityForProlongNumber",t);var n=this,o=r.util.getTimestamp();A=setInterval(function(){return r.util.getTimestamp()-o>t?void e.disableProlongationMonitoring():void(o<E.lastActivityTime&&(n.disableProlongationMonitoring(),n.prolongNumber()))},100)}function g(){T&&clearTimeout(T),T=void 0,A&&clearInterval(A),A=void 0}function m(){var t=this;r.util.log("[DynamicalTracking]",".enableProlongationMonitoring");var e=this;if(e.cleanupProlongationMonitoring(),e.ttl&&e.dtActivityInterval){var n=e.reserveTime+e.ttl-e.dtActivityInterval-r.util.getTimestamp();r.util.log("[DynamicalTracking]","timeout:",n,"me.reserveTime:",e.reserveTime,"me.ttl:",e.ttl,"me.dtActivityInterval:",e.dtActivityInterval,"now:",r.util.getTimestamp()),n>0?(r.util.log("[DynamicalTracking]","Schedule to check up the visitor activity in ",n,"secs"),T=setTimeout(function(){t.waitActivityForProlongNumber(t.dtActivityInterval)},1e3*n)):e.dtActivityInterval+n>0&&e.waitActivityForProlongNumber(e.dtActivityInterval+n)}else r.util.log("[DynamicalTracking]",".enableProlongationMonitoring","FAILED. me.ttl:",e.ttl,"me.dtActivityInterval:",e.dtActivityInterval)}function _(){r.util.log("[DynamicalTracking]",".disableProlongationMonitoring"),this.cleanupProlongationMonitoring()}function v(t){r.util.log("[DynamicalTracking]",".showPhones(",this.phones,")");var e=this;e.phones&&(e.enableProlongationMonitoring(),C.embed(e.phones,void 0,t))}function y(t){if(r.util.log("[DynamicalTracking]",".hidePhones"),P&&clearInterval(P),P=void 0,this.disableProlongationMonitoring(),t){for(var e=function(e,n){n.raw===t&&C.embed(r.util.arrayFilter(u.Storage.getItem("_cmg_phones"),function(t){return t.id===n.id}))},n=0,o=void 0;o=this.phones[n];n++)e(n,o);this.phones=r.util.arrayFilter(this.phones,function(e){return e.raw!==t}),this.saveCookie()}else this.delCookie(),C.embed(u.Storage.getItem("_cmg_phones"))}function b(t){if(!t)return null;for(var e=0,n=void 0;n=t[e];e++)n.dt=!0;return t}function w(){var t=this;return JSON.stringify({dtai:t.dtActivityInterval,ph:t.phones,ttl:t.ttl,rt:t.reserveTime,expire:t.expire})}function S(t){var e=JSON.parse(t)||{};return{dtActivityInterval:e.dtai,phones:e.ph,ttl:e.ttl,reserveTime:e.rt,expire:e.expire}}var k=s.Queue,O=a.CookieShop,E=c.ActivityMonitor,C=l.PhoneReplacer,I=O.DT,P=(O._expires&&O._expires[I]||0,void 0),T=void 0,A=void 0;t.setup=e,t.saveCookie=n,t.loadCookie=o,t.delCookie=d,t.prolongNumber=p,t.onProlongNumber=f,t.waitActivityForProlongNumber=h,t.cleanupProlongationMonitoring=g,t.enableProlongationMonitoring=m,t.disableProlongationMonitoring=_,t.showPhones=v,t.hidePhones=y,t.addDtFlag=b,t.stringify=w,t.parse=S}(o=e.DynamicalTracking||(e.DynamicalTracking={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,i=n(3),r=n(11);!function(t){function e(){t.lastActivityTime=i.util.getTimestamp()}function n(){return r.ons(document.body,t.events.split(" "),i.util.bind(e,this)),t}t.events="mousemove keydown wheel DOMMouseScroll mousewheel mousedown touchstart touchmove MSPointerDown MSPointerMove",t.onActivity=e,t.startWatch=n}(o=e.ActivityMonitor||(e.ActivityMonitor={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,i=n(2),r=n(23),s=n(3);!function(t){function e(){var e=[];for(var n in t.defaultPhonesObj)t.defaultPhonesObj.hasOwnProperty(n)&&e.push(t.defaultPhonesObj[n]);return e}function n(e){e.id in t.defaultPhonesObj||(t.defaultPhonesObj[e.id]=e)}function o(t){var e,n,o=[];if(t){for(n=0;n<t.length;n++)e=t[n],!e.img&&e.raw&&(e.text=s.util.formatPhone(e)),o.push(f({},e));t=o}return t}function a(t,e,n,o){var i=document.querySelectorAll(t);!o&&this.addDefaultPhone({id:e,img:r.domhelper.attr(i,"src"),text:null,raw:null}),r.domhelper.attr(i,"src",n)}function c(t,e,n,o,i){var s=[].slice.apply(document.querySelectorAll("a"+t)).filter(function(t){return t.href.indexOf("tel:")!==-1});s.length&&(!i&&this.addDefaultPhone({id:e,img:null,text:r.domhelper.html(s),raw:(r.domhelper.attr(s,"href")||"").split("tel:")[1]}),r.domhelper.html(s,n).attr(s,"href","tel:+"+o));var a=r.domhelper.not(document.querySelectorAll(t),s);a.length&&(!i&&this.addDefaultPhone({id:e,img:null,text:r.domhelper.html(a),raw:null}),r.domhelper.html(a,n))}function l(t,e,n){var o=t.id,i=t.text,r=t.img,a=t.raw;if(o&&0!==o.indexOf("number="))try{0===o.indexOf("selector=")&&(o=o.substring(9));var c=s.util.prepareSelector(o);null!==r?this.replacePhoneImage(c,o,r,e):i&&this.replacePhoneText(c,o,i,a,e)}catch(t){}else o&&this.textNodeReplace(t,n)}function u(t,e){var n=t.id.replace("number=",""),o=e&&!t.dt?n:this._replacedNumbers[n]||n,i="\\+?"+o.split("").join("(?:[\\s\\-\\‒\\(\\)]*)?"),r=new RegExp(i,"g"),s=["SCRIPT"],a=function(t,e){for(var n=0,o=void 0;o=t.childNodes[n];n++)3===o.nodeType?o.data.trim()&&e(o):1===o.nodeType&&s.indexOf(o.tagName)===-1&&a(o,e)},c=function(e){var n=e.nodeValue;if(e.nodeValue=n.replace(r,t.text),e.nodeValue!==n){for(;e&&"A"!==e.tagName&&"BODY"!==e.tagName;)e=e.parentNode||e.parentElement;e&&"A"===e.tagName&&e.href.indexOf("tel:")!==-1&&(e.href="tel:+"+t.raw)}};if(this._replacedNumbers[n]=t.text.replace(/\D+/g,""),e)for(var l=0;l<e.length;l++)a(e[l],c);else a(document.body,c)}function d(t,e,n){t=this.formatPhones(t);try{if(window.__cs_onReplacePhones&&"function"==typeof window.__cs_onReplacePhones&&!window.__cs_onReplacePhones(t))return}catch(t){s.util.log("[PhoneReplacer]","Ошибка при выполнении пользовательской функции подмены номеров: "+t)}if(t)for(var o=0;o<t.length;o++)this.replacePhone(t[o],e,n)}function p(){var t=this.getDefaultPhones();s.util.log("[PhoneReplacer]","embedDefault(",t,")"),t.length&&this.embed(t)}var f=i.essential.apply;t.defaultPhonesObj={},t._replacedNumbers={},t.getDefaultPhones=e,t.addDefaultPhone=n,t.formatPhones=o,t.replacePhoneImage=a,t.replacePhoneText=c,t.replacePhone=l,t.textNodeReplace=u,t.embed=d,t.embedDefault=p}(o=e.PhoneReplacer||(e.PhoneReplacer={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,i=n(3),r=n(2),s=n(24);!function(t){function e(t,e,n){if(r.essential.isUndefined(n)){var o;return o=t.length?t[0]:t,o&&o.getAttribute(e)}for(var i,s=0;i=t[s];s++)i.setAttribute(e,n);return this}function n(t,e){t.removeAttribute(e)}function o(t,e){return void 0===e?t instanceof HTMLInputElement?t.value:t.innerHTML:void(t instanceof HTMLInputElement?t.value=e:t.innerHTML=e)}function a(t,e){if(r.essential.isUndefined(e))return t[0].innerHTML;for(var n,o=0;n=t[o];o++)n.innerHTML!==e&&(n.innerHTML=e);return this}function c(t,e){var n="innerText"in(t[0]||{})?"innerText":"textContent";if(r.essential.isUndefined(e))return t[0][n];for(var o,i=0;o=t[i];i++)o[n]=e;return this}function l(t,e){for(var n,o=[],i=0;n=t[i];i++)e.indexOf(n)===-1&&o.push(n);return o}function u(t){var e=0;if(document.selection){t.focus();var n=document.selection.createRange();n.moveStart("character",-t.value.length),e=n.text.length}else if(t.selectionStart||"0"==t.selectionStart)e=t.selectionStart;else{var o=window;t.windowEl&&(o=t.windowEl),e=o.getSelection().getRangeAt(0).startOffset}return e}function d(t,e){if(null!=t)if(t.createTextRange){var n=t.createTextRange();n.move("character",e),n.select()}else if(t.selectionStart)t.focus(),t.setSelectionRange(e,e);else if(t.focus(),t.childNodes[0]){var o=window;t.windowEl&&(o=t.windowEl);var i=t.childNodes[0];if(i&&i.length>=e){var n=o.document.createRange(),r=o.getSelection();n.setStart(i,e),n.collapse(!0),r.removeAllRanges(),r.addRange(n)}}}function p(t,e){return t.querySelectorAll(e)}function f(t,e){void 0===e&&(e=!0);var n=t.parentNode||t.parentElement;return e===!1?n:!!n&&new s.Element(n)}function h(e,n){if("string"==typeof n)n&&!t.hasClass(e,n)&&(e.className=e.className+" "+n);else for(var o=0,i=n.length;o<i;o++)t.addClass(e,n[o]);return this}function g(t,e){return e&&(" "+t.className+" ").indexOf(" "+e+" ")!==-1}function m(t,e){return void 0===e&&(e=!0),t=t.firstChild,e===!1?t:new s.Element(t)}function _(t,e,n){switch(i.util.typeOf(e)){case"string":break;case"object":e=new s.Element(e),n?(n=new s.Element(n),t.insertBefore(e.dom,n.dom)):t.appendChild(e.dom)}}function v(e,n){void 0===n&&(n=!1);var o=t.parent(e);o&&o.dom&&o.remove(e)}function y(t,e){e=new s.Element(e),t.removeChild(e.dom)}function b(e){for(var n=new s.Element(e),o=0,i=20;o<i;o++){if("none"===n.css("display")||0===n.css("opacity"))return!1;if("body"===n.dom.tagName.toLocaleLowerCase())break;if(n=t.parent(n.dom),!n)return!1}return!0}function w(t,e,n){var o;return"number"!=typeof e?(this.dom.setSelectionRange?(e=t.selectionStart,n=t.selectionEnd):document.selection&&document.selection.createRange&&(o=document.selection.createRange(),e=0-o.duplicate().moveStart("character",-1e5),n=e+o.text.length),{begin:e,end:n}):(n="number"==typeof n?n:e,void(t.setSelectionRange?t.setSelectionRange(e,n):t.createTextRange&&(o=t.createTextRange(),o.collapse(!0),o.moveEnd("character",n),o.moveStart("character",e),o.select())))}t.attr=e,t.removeAttr=n,t.val=o,t.html=a,t.text=c,t.not=l,t.getCaretPosition=u,t.setCaretPosition=d,t.select=p,t.parent=f,t.addClass=h,t.hasClass=g,t.first=m,t.append=_,t.destroy=v,t.remove=y,t.isVisible=b,t.caret=w}(o=e.domhelper||(e.domhelper={}))},function(t,e,n){"use strict";function o(t,e){return e.charAt(1).toUpperCase()}function i(t){return p[t]||(p[t]=t.replace(h,o))}function r(t){var e=0;return t.wheelDelta?e=t.wheelDelta/120:t.detail&&(e=-t.detail/3),e}function s(t,e){return t?(t=t.dom||{},t.id||(t.id=(e||_)+ ++m),t.id):(e||_)+ ++m}Object.defineProperty(e,"__esModule",{value:!0});var a=n(2),c=n(23),l="onmousewheel"in document?"mousewheel":"DOMMouseScroll",u={},d=document.defaultView,p={},f=/alpha\(opacity=(.*)\)/gi,h=/(-[a-z])/gi,g=/height|width|margin|padding|left|top|right|bottom/,m=0,_="gen-",v=function(){function t(t){if(t.dom?this.dom=t.dom:this.dom=t,this.dom===document)u.doc?this.events=u.doc.events:(this.events={},u.doc=this);else{var e=this.dom.getAttribute("data-cache-id");e&&u[e]?this.events=u[e].events:(this.events={},e=s(),this.attr("data-cache-id",e),u[e]=this),this.cacheId=e}}return t.prototype.on=function(t,e,n,o){var i,s=this,c=t;switch(n=n||this,a.essential.isString(o)&&(i=o),t){case"mousewheel":t=l;break;case"mouseenter":t="mouseover";break;case"mouseleave":t="mouseout"}var u=function(i){var l=i.target,d=i.fromElement||i.relatedTarget,p=i.toElement||i.target;switch(c){case"mouseenter":if(!d)return;if(s.within(d,"mouseenter"))return;break;case"mouseleave":if(!p)return;if(s.within(p))return}e.apply(n,[i,l,r(i)]),a.essential.isObject(o)&&o.$once&&s.dom.removeEventListener(t,u,!1)};this.dom.addEventListener(t,u,!1),this.events[t]=this.events[t]||[],this.events[t].push({fn:e,wrapperFn:u})},t.prototype.once=function(t,e,n,o){o=o||{},n=n||this,o.$once=!0,this.on(t,e,n,o)},t.prototype.un=function(t,e){for(var n,o,i=this.events[t]||[],r=0,s=i.length;r<s;r++)if(n=i[r],n.fn===e){o=n.wrapperFn;break}o&&(i.splice(r,1),this.dom.removeEventListener(t,o,!1))},t.prototype.within=function(e,n){var o,i=!1,r=!1;return e=new t(e),o=e.attr("id"),o||(o=s(),r=!0,e.attr("id",o)),0===this.select("#"+o).length&&(i=!1),this.dom.id&&this.dom.id===e.dom.id&&(i=!0),r&&e.removeAttr("id"),i},t.prototype.select=function(t){return c.domhelper.select(this.dom,t)},t.prototype.attr=function(t,e){return c.domhelper.attr(this.dom,t,e)},t.prototype.removeAttr=function(t){c.domhelper.removeAttr(this.dom,t)},t.prototype.val=function(t){return c.domhelper.val(this.dom,t)},t.prototype.css=function(t,e){if(""!==t){if(!/:/.test(t))return a.essential.isObject(t)?this.setStyle(t):t&&e?this.setStyle(t,e):t?this.getStyle(t):void 0;for(var n=t.split(";"),o=0,i=n.length;o<i;o++){var r=n[o].split(":"),s=!1;r.length<2||(/!important/.test(r[1])&&(s=!0,r[1]=r[1].replace(" !important","")),this.setStyle(r[0],r[1],s))}}},t.prototype.setStyle=function(t,e,n){var o,r;"object"!=typeof t&&(o={},o[t]=e,t=o);for(r in t)switch(e=t[r],g.test(r)&&!isNaN(Number(e))&&(e+="px"),r){case"border-radius":a.essential.isNumber(e)&&(e+="px"),this.dom.style.BorderRadius=e,this.dom.style.borderRadius=e,this.dom.style.MozBorderRadius=e,this.dom.style.WebkitBorderRadius=e;break;case"float":this.dom.style.styleFloat=e,this.dom.style.cssFloat=e;break;default:this.dom.style[i(r)]=e,n&&this.dom.style&&this.dom.style.setProperty&&this.dom.style.setProperty(r,e,"important")}return this},t.prototype.getStyle=function(t,e){if(d&&d.getComputedStyle){var n=this.dom,o=void 0,r=void 0,s=void 0,a=void 0;return n==document?null:(t=i(t),s=(o=n.style[t])?o:(r=d.getComputedStyle(n,""))?r[t]:null,(/\+|\ /.test(s)||"auto"===s||e)&&void 0!==n.getBoundingClientRect().width?n.getBoundingClientRect()[t]:("marginRight"==t&&"0px"!=s&&(a=n.style.display,
n.style.display="inline-block",s=d.getComputedStyle(n,"").marginRight,n.style.display=a),"backgroundColor"==t&&"rgba(0, 0, 0, 0)"==s&&(s="transparent"),s))}var n=this.dom,c=void 0,r=void 0;if(n==document)return null;if("opacity"==t){if(n.style.filter.match&&(c=n.style.filter.match(f))){var l=parseFloat(c[1]);if(!isNaN(l))return l?l/100:0}return 1}return t=i(t),n.style[t]||((r=n.currentStyle)?r[t]:null)},t.prototype.parent=function(t){return c.domhelper.parent(this.dom,t)},t.prototype.isVisible=function(){return c.domhelper.isVisible(this.dom)},t.prototype.addClass=function(t){return c.domhelper.addClass(this.dom,t)},t.prototype.hasClass=function(t){return c.domhelper.hasClass(this.dom,t)},t.prototype.height=function(t){return void 0!==t?(a.essential.isString(t)&&/px/.test(String(t))===!1&&(t+="px"),this.css("height",t),this):parseInt(this.css("height"))},t.prototype.wrap=function(e){e=new t(e);var n=e.parent();this.update(e.dom.outerHTML),n.append(this,e),e.destroy()},t.prototype.remove=function(t){c.domhelper.remove(this.dom,t)},t.prototype.destroy=function(t){void 0===t&&(t=!1),delete u[this.cacheId],c.domhelper.destroy(this.dom,t)},t.prototype.update=function(t){this.dom.innerHTML=t},t.prototype.first=function(t){return void 0===t&&(t=!0),c.domhelper.first(this.dom,t)},t.prototype.append=function(t,e){c.domhelper.append(this.dom,t,e)},t.prototype.caret=function(t,e){return c.domhelper.caret(this.dom,t,e)},t}();e.Element=v},function(t,e,n){"use strict";var o=this&&this.__assign||Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};Object.defineProperty(e,"__esModule",{value:!0});var i,r=n(1),s=n(6),a=n(26),c=n(28),l=n(3),u=l.util.createLinkTag,d=n(29),p=l.util.log;!function(t){function e(t,e){c.WidgetManager.activeWidgetGroupList=Object.getOwnPropertyNames(t.widgets).filter(function(e){return null!==t.widgets[e]}),u("list active widget = [",c.WidgetManager.activeWidgetGroupList,"]");for(var o=function(o){t=n(o,t);var i=new a.WidgetLoader(o,e);c.WidgetManager.widgetsOpts[o]=i.getOpts(),i.load(function(t){var e={__commands:["viewControllerReady:"+o]};e["viewControllerReady:"+o]=function(e){e&&e(t,i.getOpts())},r.Queue.registerAndProcess(["viewControllerReady:"+o],e,!0)})},i=0,s=c.WidgetManager.activeWidgetGroupList;i<s.length;i++){var l=s[i];o(l)}}function n(t,e){return e.widgets[t].common=o({},e.widgets[t].common,e.common),e}function i(t){var e=s();t.consultant&&t.consultant[e]&&(delete t.consultant[e].tpls,delete t.consultant[e].js,delete t.consultant[e].css);for(var n in t)c.WidgetManager.userInitialWidgetViewsOptions[n]=t[n]&&t[n][e]}var s=l.util.getDeviceType,u=l.util.log;t.__commands=["applyWidgetsOptions"],t.init=e,t.applyWidgetsOptions=i}(i=e.Core||(e.Core={})),r.Queue.registerAndProcess(i.__commands,i,!0),s.EventBus.on("waitforloadstyles",function(t,e){var n=c.WidgetManager.widgetsOpts[t].css;if(n){n=d(n)(e);var o=u(n);e.id?o.id="comagic-"+t+"-"+e.id:o.id="comagic-"+t,o.onload=function(){p("styles was loaded from url "+n),r.Queue.push("viewControllerReady:"+t,function(n,o){s.EventBus.fireEvent(t+":viewcontrollerrun",e,n,o)})},o.onerror=function(){p("error! styles was not loaded from url "+n)},document.head.appendChild(o)}else r.Queue.push("viewControllerReady:"+t,function(n,o){s.EventBus.fireEvent(t+":viewcontrollerrun",e,n,o)})})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(27),i=n(3),r=i.util.log,s=n(14),a=n(28),c=n(2),l=c.essential.mergeObjects,u=function(){function t(t,e){this.name=t,this.opts=l(o.getDefaultWidgetOpts(t,e),a.WidgetManager.userInitialWidgetViewsOptions[t]),a.WidgetManager.widgetsOpts[t]=this.getOpts()}return t.prototype.getOpts=function(){return this.opts},t.prototype.checkLoad=function(t){var e=this,n=t,o={},i={js:this.opts.js};for(var r in this.opts.tpls)i[r]=this.opts.tpls[r];return function(t,r){var s=!1;for(var a in i)i[a]===t&&("js"!==a&&(o[a]=r||""),i[a]=null),s=s||i[a];!s&&n(o,e.script)}},t.prototype.load=function(t){var e=this,n=this.checkLoad(t);if(this.opts.js&&(this.script=i.util.loadScript(this.opts.js,function(){r("scripts was loaded from url "+e.opts.js),n(e.opts.js)}),this.script.id="comagic-vc-"+this.name),this.opts.tpls){var o=function(t){s.ajax({url:a.opts.tpls[t],method:"GET",contentType:"text/html",complete:function(o){r("html was loaded from url "+e.opts.tpls[t]),n(e.opts.tpls[t],o.response)}})},a=this;for(var c in this.opts.tpls)o(c)}return this.script},t}();e.WidgetLoader=u},function(t,e,n){"use strict";function o(t,e){u=t,d=e}function i(){return"prod"===d?".min.js":".debug.js"}function r(t,e){var n={js:"",css:"",tpls:null},o=p.util.getDeviceType();return t&&(t[o]?(n.tpls=l({},t[o].tpls),n.css=t[o].css||"",n.js=t[o].js||""):f("views for "+e+" options doesn't found")),n}function s(t,e){return new h.essential.URL(e).replace({path:t})}function a(t,e){for(var n in t)t[n]=s(t[n],e);return t}function c(t,e){var n=r(u[t],t);return n.js=""+s(n.js,e)+i(),n.css=s(n.css,e),n.tpls=a(n.tpls,e),n.beforeViewControllerRun=function(t,e){return t.is_personal_info_enabled=!1,t.personal_info_text="Согласен с обработкой персональных данных",{settings:t,tpls:e}},n.afterViewControllerRun=function(){},n}var l=this&&this.__assign||Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};Object.defineProperty(e,"__esModule",{value:!0});var u,d,p=n(3),f=p.util.log,h=n(2);e.init=o,e.getPostfixWidgetUrl=i,e.getWidgetOptionsForCurrentDevice=r,e.getDefaultWidgetOpts=c},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n;!function(t){function e(e,n){t.registeredWidgetsCollection[e]=n}function n(e){return t.registeredWidgetsCollection[e]}function o(e){if(t.createdWidgets[e])for(var n=0;n<t.createdWidgets[e].length;n++)t.createdWidgets[e][n].destroy();t.createdWidgets[e]=[]}function i(){for(var e in t.createdWidgets)o(e)}t.WIDGETS_GROUP={consultant:["consultant_chat","consultant_sitephone","consultant_offline_message"],personal_form:["personal_form"],call_generator:["call_generator"],offline_message_generator:["offline_message_generator"],sitephone:["sitephone"]},t.registeredWidgetsCollection={},t.createdWidgets={},t.destroyedWidgetsCollection=[],t.userInitialWidgetViewsOptions={},t.widgetsOpts={},t.customWidgetsList=[],t.register=e,t.getWidget=n,t.destroyWidgetsByGroup=o,t.destroyWidgets=i}(n=e.WidgetManager||(e.WidgetManager={}))},function(t,e,n){(function(e){function o(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function i(t,e){for(var n=-1,o=t?t.length:0,i=Array(o);++n<o;)i[n]=e(t[n],n,t);return i}function r(t,e){for(var n=-1,o=Array(t);++n<t;)o[n]=e(n);return o}function s(t,e){return i(e,function(e){return t[e]})}function a(t){return"\\"+K[t]}function c(t,e){return function(n){return t(e(n))}}function l(t,e){var n=dt(t)||k(t)?r(t.length,String):[],o=n.length,i=!!o;for(var s in t)!e&&!ot.call(t,s)||i&&("length"==s||v(s,o))||n.push(s);return n}function u(t,e,n,o){return void 0===t||S(t,nt[n])&&!ot.call(o,n)?e:t}function d(t,e,n){var o=t[e];ot.call(t,e)&&S(o,n)&&(void 0!==n||e in t)||(t[e]=n)}function p(t){if(!b(t))return at(t);var e=[];for(var n in Object(t))ot.call(t,n)&&"constructor"!=n&&e.push(n);return e}function f(t){if(!T(t))return w(t);var e=b(t),n=[];for(var o in t)("constructor"!=o||!e&&ot.call(t,o))&&n.push(o);return n}function h(t,e){return e=ct(void 0===e?t.length-1:e,0),function(){for(var n=arguments,i=-1,r=ct(n.length-e,0),s=Array(r);++i<r;)s[i]=n[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=n[i];return a[e]=s,o(t,this,a)}}function g(t){if("string"==typeof t)return t;if(j(t))return ut?ut.call(t):"";var e=t+"";return"0"==e&&1/t==-L?"-0":e}function m(t,e,n,o){n||(n={});for(var i=-1,r=e.length;++i<r;){var s=e[i],a=o?o(n[s],t[s],s,n,t):void 0;d(n,s,void 0===a?t[s]:a)}return n}function _(t){return h(function(e,n){var o=-1,i=n.length,r=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(r=t.length>3&&"function"==typeof r?(i--,r):void 0,s&&y(n[0],n[1],s)&&(r=i<3?void 0:r,i=1),e=Object(e);++o<i;){var a=n[o];a&&t(e,a,o,r)}return e})}function v(t,e){return e=null==e?F:e,!!e&&("number"==typeof t||J.test(t))&&t>-1&&t%1==0&&t<e}function y(t,e,n){if(!T(n))return!1;var o=typeof e;return!!("number"==o?O(n)&&v(e,n.length):"string"==o&&e in n)&&S(n[e],t)}function b(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||nt;return t===n}function w(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}function S(t,e){return t===e||t!==t&&e!==e}function k(t){return E(t)&&ot.call(t,"callee")&&(!st.call(t,"callee")||it.call(t)==W)}function O(t){return null!=t&&P(t.length)&&!I(t)}function E(t){return A(t)&&O(t)}function C(t){return!!A(t)&&(it.call(t)==H||"string"==typeof t.message&&"string"==typeof t.name)}function I(t){var e=T(t)?it.call(t):"";return e==B||e==V}function P(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=F}function T(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function A(t){return!!t&&"object"==typeof t}function j(t){return"symbol"==typeof t||A(t)&&it.call(t)==q}function x(t){return null==t?"":g(t)}function N(t){return O(t)?l(t):p(t)}function U(t){return O(t)?l(t,!0):f(t)}function R(t,e,n){var o=D.imports._.templateSettings||D;n&&y(t,e,n)&&(e=void 0),t=x(t),e=pt({},e,o,u);var i,r,c=pt({},e.imports,o.imports,u),l=N(c),d=s(c,l),p=0,f=e.interpolate||Z,h="__p += '",g=RegExp((e.escape||Z).source+"|"+f.source+"|"+(f===M?Y:Z).source+"|"+(e.evaluate||Z).source+"|$","g"),m="sourceURL"in e?"//# sourceURL="+e.sourceURL+"\n":"";t.replace(g,function(e,n,o,s,c,l){return o||(o=s),h+=t.slice(p,l).replace(X,a),n&&(i=!0,h+="' +\n__e("+n+") +\n'"),c&&(r=!0,h+="';\n"+c+";\n__p += '"),o&&(h+="' +\n((__t = ("+o+")) == null ? '' : __t) +\n'"),p=l+e.length,e}),h+="';\n";var _=e.variable;_||(h="with (obj) {\n"+h+"\n}\n"),h=(r?h.replace(G,""):h).replace(z,"$1").replace(Q,"$1;"),h="function("+(_||"obj")+") {\n"+(_?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(r?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var v=ft(function(){return Function(l,m+"return "+h).apply(void 0,d)});if(v.source=h,C(v))throw v;return v}var M=n(30),D=n(31),L=1/0,F=9007199254740991,W="[object Arguments]",H="[object Error]",B="[object Function]",V="[object GeneratorFunction]",q="[object Symbol]",G=/\b__p \+= '';/g,z=/\b(__p \+=) '' \+/g,Q=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Y=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,J=/^(?:0|[1-9]\d*)$/,Z=/($^)/,X=/['\n\r\u2028\u2029\\]/g,K={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},$="object"==typeof e&&e&&e.Object===Object&&e,tt="object"==typeof self&&self&&self.Object===Object&&self,et=$||tt||Function("return this")(),nt=Object.prototype,ot=nt.hasOwnProperty,it=nt.toString,rt=et.Symbol,st=nt.propertyIsEnumerable,at=c(Object.keys,Object),ct=Math.max,lt=rt?rt.prototype:void 0,ut=lt?lt.toString:void 0,dt=Array.isArray,pt=_(function(t,e,n,o){m(e,U(e),t,o)}),ft=h(function(t,e){try{return o(t,void 0,e)}catch(t){return C(t)?t:new Error(t)}});t.exports=R}).call(e,function(){return this}())},function(t,e){var n=/<%=([\s\S]+?)%>/g;t.exports=n},function(t,e,n){(function(e){function o(t){return function(e){return null==t?void 0:t[e]}}function i(t){if("string"==typeof t)return t;if(s(t))return E?E.call(t):"";var e=t+"";return"0"==e&&1/t==-u?"-0":e}function r(t){return!!t&&"object"==typeof t}function s(t){return"symbol"==typeof t||r(t)&&S.call(t)==d}function a(t){return null==t?"":i(t)}function c(t){return t=a(t),t&&f.test(t)?t.replace(p,b):t}var l=n(30),u=1/0,d="[object Symbol]",p=/[&<>"'`]/g,f=RegExp(p.source),h=/<%-([\s\S]+?)%>/g,g=/<%([\s\S]+?)%>/g,m={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},_="object"==typeof e&&e&&e.Object===Object&&e,v="object"==typeof self&&self&&self.Object===Object&&self,y=_||v||Function("return this")(),b=o(m),w=Object.prototype,S=w.toString,k=y.Symbol,O=k?k.prototype:void 0,E=O?O.toString:void 0,C={escape:h,evaluate:g,interpolate:l,variable:"",imports:{_:{escape:c}}};t.exports=C}).call(e,function(){return this}())},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,i=n(3),r=n(1),s=n(4),a=n(20),c=n(12),l=n(13),u=n(15),d=n(33),p=n(6),f=n(34);!function(t){function e(e,n,o){t.push(["sendMessage",[e,n,o]])}function n(t){c.Analytics.trackSysEvent(i.util.isObject(t)?t.component_event:t)}function o(t){r.Queue.push(t)}function h(t){this.push(["setAccount",[t]])}function g(t){this.push(["setDynamicalReplacement",[t]])}function m(t){this.push(["setWebUrl",[t]])}function _(t,e){this.push(["sitePhoneCall",[t,e]])}function v(){var t=Comagic.UI.getWidget("consultant_chat"),e=Comagic.UI.createObserver();t&&t.isChatAvailable()?e.isUsed?e.pub("consultant_chat"):Comagic.UI.show("consultant_chat"):e.isUsed?e.pub("consultant_offline_message"):Comagic.UI.show("consultant_offline_message")}function y(){var t=Comagic.UI.createObserver(),e=Comagic.UI.getWidget("consultant_sitephone");t.isUsed?e.settings.sitephone.is_rich_functional?t.pub("consultant_sitephone"):e.settings.sitephone.is_visible?t.pub("consultant_simple_sitephone"):t.pub("consultant_sitephone"):Comagic.UI.show("consultant_sitephone")}function b(){Comagic.UI.show("sitephone")}function w(){e("start_visitor_chat")}function S(t,e){this.sendChatByMail(t,e)}function k(t,n){e("send_chat_by_mail",t,n)}function O(t){this.setOperatorRating(t)}function E(t){e("set_operator_rating",{rating:t,comment:null})}function C(){this.notifyWriting()}function I(){e("write_notify",!1)}function P(){this.closeChat()}function T(){e("close_chat")}function A(t,e,n,o){this.push(["trackEvent",[t,e,n,o]])}function j(t,e){this.push(["setProperty",[t,e]])}function x(t,e){this.push(["getProperty",[t,e]])}function N(t,e){this.push(["hasProperty",[t,e]])}function U(t){this.push(["deleteProperty",[t]])}function R(t){this.push(["getUploadUrl",[t]])}function M(){return a.DynamicalTracking.phones}function D(){return nt("_cmg_phones")}function L(t){this.push(["setOperatorId",[t]])}function F(){return s.CookieShop.getSessionId()}function W(){return s.CookieShop.getVisitorId()}function H(t){e("track_lead_show",{action_type:t.action_type,action_log_id:t.action_log_id})}function B(t,n,o){e("submit_lead_form",{log_id:t,data:n},o)}function V(t){e("cancel_lead_form",{log_id:t})}function q(t){e("on_timer_up",{scenario_id:t})}function G(){return{site_key:et(),visitor_id:Number(this.getVisitorId()),hit_id:Number(K()),session_id:Number(this.getSessionId()),consultant_server_url:$(),comagic_id:tt()}}function z(t){i.util.setDebug(t)}function Q(t,e){p.EventBus.on("api:"+t,e)}function Y(t,e){void 0===e&&(e={}),d.ComagicWebApi.request("get_captcha",e,t)}function J(t){}function Z(){return i.util.getDeviceType()}function X(t){return i.util.tformat(t)}var K=c.Analytics.getHitId,$=l.SiteSettings.getServerBaseUrl,tt=c.Analytics.getComagicId,et=l.SiteSettings.getSiteKey,nt=u.Storage.getItem;t.sendMessage=e,t.trackSysEvent=n,t.push=o,t.setAccount=h,t.setDynamicalReplacement=g,t.setWebUrl=m,t.sitePhoneCall=_,t.openChatWindow=v,t.openSitePhonePanel=y,t.openVASitePhonePanel=b,t.openSiteRequestPanel=function(){var t=Comagic.UI.createObserver();t.pub("consultant_offline_message"),t.isUsed?t.pub("consultant_offline_message"):Comagic.UI.show("consultant_offline_message")},t.startVisitorChat=w,t.onSendChatByMail=S,t.sendChatByMail=k,t.onOperatorRate=O,t.setOperatorRating=E,t.onChatTyping=C,t.notifyWriting=I,t.onChatClose=P,t.closeChat=T,t.trackEvent=A,t.setProperty=j,t.getProperty=x,t.hasProperty=N,t.deleteProperty=U,t.getUploadUrl=R,t.getDTPhones=M,t.getPhones=D,t.setOperatorId=L,t.getSessionId=F,t.getVisitorId=W,t.trackLeadShow=H,t.onLeadFormSubmit=B,t.onLeadFormCancel=V,t.onLeadTimerUp=q,t.getCredentials=G,t.setDebug=z,t.on=Q,t.getCaptcha=Y,t.onOperatorStatusChange=J,t.getDeviceType=Z,t.tformat=X,t.visitorCard=new f.DictStorage("vvc"),t.storage=new f.DictStorage("storage")}(o=e.API||(e.API={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,i=n(14);!function(t){function e(t){o=t}function n(t,e,n){i.ajax({url:o,crossDomain:!0,data:JSON.stringify({method:t,params:e||{}}),type:"POST",dataType:"json",headers:{"Content-Type":"application/json"},complete:function(t){var e;"application/json"===t.getResponseHeader("Content-Type")?(e=JSON.parse(t.response),n(e.result)):(e=t.response,n(e))}})}var o;t.init=e,t.request=n}(o=e.ComagicWebApi||(e.ComagicWebApi={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(15),i=function(){function t(t,e){void 0===e&&(e=0),this.key="_cmg_"+t,this.ttl=e,o.Storage.getItem(this.key)||o.Storage.setItem(this.key,{},this.ttl)}return t.prototype.getItem=function(t){var e=o.Storage.getItem(this.key);return e[t]},t.prototype.setItem=function(t,e){var n=o.Storage.getItem(this.key);n[t]=e,o.Storage.setItem(this.key,n,this.ttl)},t.prototype.getDict=function(){var t=o.Storage.getItem(this.key);return t},t}();e.DictStorage=i},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_WIDGET_VIEWS_OPTIONS={personal_form:{desktop:{js:"/widget/js/lead/desktop/personal_form",css:"/widget/css/lead/desktop/lead_personal_form_desktop-<%=banner_color%>.css",tpls:{personal_form:"/widget/html/lead/desktop/personal_form.html"}},tablet:{js:"/widget/js/lead/desktop/personal_form",css:"/widget/css/lead/desktop/lead_personal_form_desktop-<%=banner_color%>.css",tpls:{personal_form:"/widget/html/lead/desktop/personal_form.html"}},mobile:{js:"/widget/js/lead/mobile/personal_form",css:"/widget/css/lead/mobile/lead_personal_form_mobile-<%=banner_color_mobile%>.css",tpls:{personal_form:"/widget/html/lead/mobile/personal_form.html"}}},call_generator:{desktop:{js:"/widget/js/lead/desktop/call_generator",css:"/widget/css/lead/desktop/lead_call_generator_desktop.css",tpls:{call_generator:"/widget/html/lead/desktop/call_generator.html"}},tablet:{js:"/widget/js/lead/desktop/call_generator",css:"/widget/css/lead/desktop/lead_call_generator_desktop.css",tpls:{call_generator:"/widget/html/lead/desktop/call_generator.html"}},mobile:{js:"/widget/js/lead/mobile/call_generator",css:"/widget/css/lead/mobile/lead_call_generator_mobile-<%=banner_color_mobile%>.css",tpls:{call_generator:"/widget/html/lead/mobile/call_generator.html"}}},offline_message_generator:{desktop:{js:"/widget/js/lead/desktop/offline_message_generator",css:"/widget/css/lead/desktop/lead_offline_message_generator_desktop-<%=banner_color%>.css",tpls:{offline_message_generator:"/widget/html/lead/desktop/offline_message_generator.html"}},tablet:{js:"/widget/js/lead/desktop/offline_message_generator",css:"/widget/css/lead/desktop/lead_offline_message_generator_desktop-<%=banner_color%>.css",tpls:{offline_message_generator:"/widget/html/lead/desktop/offline_message_generator.html"}},mobile:{js:"/widget/js/lead/mobile/offline_message_generator",css:"/widget/css/lead/mobile/lead_offline_message_generator_mobile-<%=banner_color_mobile%>.css",tpls:{offline_message_generator:"/widget/html/lead/mobile/offline_message_generator.html"}}},consultant:{desktop:{js:"/widget/js/consultant/desktop/consultant",css:'/widget/css/consultant/desktop/consultant-<%=common["banner_color"]%>.css',tpls:{consultant_chat_bot_message:"/widget/html/consultant/desktop/consultant_chat_bot_message.html",consultant_chat_bot_email_message:"/widget/html/consultant/desktop/consultant_chat_bot_email_message.html",consultant_chat_bot_retention_btn_message:"/widget/html/consultant/desktop/consultant_chat_bot_retention_btn_message.html",consultant_chat_bot_rating_message:"/widget/html/consultant/desktop/consultant_chat_bot_rating_message.html",consultant_chat_bot_vcard_message:"/widget/html/consultant/desktop/consultant_chat_bot_vcard_message.html",consultant_chat_visitor_file_message:"/widget/html/consultant/desktop/consultant_chat_visitor_file_message.html",consultant_chat_operator_file_message:"/widget/html/consultant/desktop/consultant_chat_operator_file_message.html",consultant_chat_operator_message:"/widget/html/consultant/desktop/consultant_chat_operator_message.html",consultant_chat_visitor_message:"/widget/html/consultant/desktop/consultant_chat_visitor_message.html",consultant_chat_system_message:"/widget/html/consultant/desktop/consultant_chat_system_message.html",consultant_label:"/widget/html/consultant/desktop/consultant_label.html",consultant_sitephone_label:"/widget/html/consultant/desktop/consultant_sitephone_label.html",consultant_rack:"/widget/html/consultant/desktop/consultant_rack.html",consultant_chat:"/widget/html/consultant/desktop/consultant_chat.html",consultant_chat_group_selector:"/widget/html/consultant/desktop/consultant_chat_group_selector.html",consultant_simple_sitephone:"/widget/html/consultant/desktop/consultant_simple_sitephone.html",consultant_sitephone:"/widget/html/consultant/desktop/consultant_sitephone.html",consultant_offline_message:"/widget/html/consultant/desktop/consultant_offline_message.html",consultant_times_options:"/widget/html/consultant/desktop/consultant_times_options.html"}},tablet:{js:"/widget/js/consultant/desktop/consultant",css:'/widget/css/consultant/desktop/consultant-<%=common["banner_color"]%>.css',tpls:{consultant_chat_bot_message:"/widget/html/consultant/desktop/consultant_chat_bot_message.html",consultant_chat_bot_email_message:"/widget/html/consultant/desktop/consultant_chat_bot_email_message.html",consultant_chat_bot_retention_btn_message:"/widget/html/consultant/desktop/consultant_chat_bot_retention_btn_message.html",consultant_chat_bot_rating_message:"/widget/html/consultant/desktop/consultant_chat_bot_rating_message.html",consultant_chat_bot_vcard_message:"/widget/html/consultant/desktop/consultant_chat_bot_vcard_message.html",consultant_chat_visitor_file_message:"/widget/html/consultant/desktop/consultant_chat_visitor_file_message.html",consultant_chat_operator_file_message:"/widget/html/consultant/desktop/consultant_chat_operator_file_message.html",consultant_chat_operator_message:"/widget/html/consultant/desktop/consultant_chat_operator_message.html",consultant_chat_visitor_message:"/widget/html/consultant/desktop/consultant_chat_visitor_message.html",consultant_chat_system_message:"/widget/html/consultant/desktop/consultant_chat_system_message.html",consultant_label:"/widget/html/consultant/desktop/consultant_label.html",consultant_sitephone_label:"/widget/html/consultant/desktop/consultant_sitephone_label.html",consultant_rack:"/widget/html/consultant/desktop/consultant_rack.html",consultant_chat:"/widget/html/consultant/desktop/consultant_chat.html",consultant_chat_group_selector:"/widget/html/consultant/desktop/consultant_chat_group_selector.html",consultant_simple_sitephone:"/widget/html/consultant/desktop/consultant_simple_sitephone.html",consultant_sitephone:"/widget/html/consultant/desktop/consultant_sitephone.html",consultant_offline_message:"/widget/html/consultant/desktop/consultant_offline_message.html",consultant_times_options:"/widget/html/consultant/desktop/consultant_times_options.html"}},mobile:{js:"/widget/js/consultant/mobile/consultant",css:'/widget/css/consultant/mobile/consultant-<%=common["banner_color"]%>.css',tpls:{consultant_chat_bot_message:"/widget/html/consultant/mobile/consultant_chat_bot_message.html",consultant_chat_bot_retention_btn_message:"/widget/html/consultant/mobile/consultant_chat_bot_retention_btn_message.html",consultant_chat_bot_rating_message:"/widget/html/consultant/mobile/consultant_chat_bot_rating_message.html",consultant_chat_bot_vcard_message:"/widget/html/consultant/mobile/consultant_chat_bot_vcard_message.html",consultant_chat_visitor_file_message:"/widget/html/consultant/mobile/consultant_chat_visitor_file_message.html",consultant_chat_operator_file_message:"/widget/html/consultant/mobile/consultant_chat_operator_file_message.html",consultant_invite_operator_message:"/widget/html/consultant/mobile/consultant_invite_operator_message.html",consultant_chat_operator_message:"/widget/html/consultant/mobile/consultant_chat_operator_message.html",consultant_chat_visitor_message:"/widget/html/consultant/mobile/consultant_chat_visitor_message.html",consultant_chat_system_message:"/widget/html/consultant/mobile/consultant_chat_system_message.html",consultant_label:"/widget/html/consultant/mobile/consultant_label.html",consultant_sitephone_label:"/widget/html/consultant/mobile/consultant_sitephone_label.html",consultant_invite:"/widget/html/consultant/mobile/consultant_invite.html",consultant_chat:"/widget/html/consultant/mobile/consultant_chat.html",consultant_chat_group_selector:"/widget/html/consultant/mobile/consultant_chat_group_selector.html",consultant_sitephone:"/widget/html/consultant/mobile/consultant_sitephone.html",consultant_offline_message:"/widget/html/consultant/mobile/consultant_offline_message.html",consultant_times_options:"/widget/html/consultant/mobile/consultant_times_options.html"}}},sitephone:{desktop:{js:"/widget/js/sitephone/desktop/sitephone",css:"/widget/css/sitephone/desktop/sitephone_desktop-<%=widget_color%>.css",tpls:{sitephone:"/widget/html/sitephone/desktop/sitephone.html",sitephone_label:"/widget/html/sitephone/desktop/sitephone_label.html"}},tablet:{js:"/widget/js/sitephone/desktop/sitephone",css:"/widget/css/sitephone/desktop/sitephone_desktop-<%=widget_color%>.css",tpls:{sitephone:"/widget/html/sitephone/desktop/sitephone.html",sitephone_label:"/widget/html/sitephone/desktop/sitephone_label.html"}},mobile:{js:"/widget/js/sitephone/mobile/sitephone",css:"/widget/css/sitephone/mobile/sitephone_mobile-<%=widget_color%>.css",tpls:{sitephone:"/widget/html/sitephone/mobile/sitephone.html"}}}}},function(t,e,n){"use strict";function o(t,e){i.EventBus.on(t+":viewcontrollerrun",function(n,o,s){var a=n.id?t+":"+n.id+":fire_event":t+":fire_event",c={__commands:[a]};c[a]=function(t,e){i.EventBus.fireEvent(t,e)};var l=s.beforeViewControllerRun(n,o),u=l.settings,d=l.tpls;e(u,d),s.afterViewControllerRun(window.Comagic.UI),r.Queue.registerAndProcess(c.__commands,c,!0)})}Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),r=n(1);e.registerViewController=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,i=n(2),r=n(3),s=n(23),a=n(4);!function(t){function e(t){if(t.tg){var e=r.util.prepareSelector(t.tg),n=document.querySelectorAll(e);if(n)try{void 0===o&&(o=s.domhelper.text(n));var i=a.CookieShop.getVisitorId();s.domhelper.text(n,(o||"")+(t.pr?t.pr:"")+(i.length<=+t.tl?i:i.slice(-t.tl)))}catch(t){r.util.log(t)}}}function n(t,n){e(i.essential.apply({},n.ve))}var o;t.embedVisitorId=e,t.run=n}(o=e.VisitorIdEmbedder||(e.VisitorIdEmbedder={}))}]));